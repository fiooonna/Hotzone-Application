(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{23:function(e,t,n){},30:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(1),c=n.n(i),r=n(19),o=n.n(r),s=(n(30),n(2)),l=n(3),d=n(5),u=n(4),j=n.n(u),b=n(6),f=n(7),p=n.n(f),h=new(n(16).a);function O(e,t){return x.apply(this,arguments)}function x(){return(x=Object(b.a)(j.a.mark((function e(t,n){var a,i,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,i=window.location.origin+"/api/"+t+"/",e.prev=2,e.next=5,fetch(i,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:h.get("token")?"Token "+h.get("token"):""},body:JSON.stringify({params:n})});case 5:a=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:return e.prev=11,e.next=14,a.json();case 14:return c=e.sent,e.abrupt("return",c);case 18:return e.prev=18,e.t1=e.catch(11),e.abrupt("return","Error");case 21:case"end":return e.stop()}}),e,null,[[2,8],[11,18]])})))).apply(this,arguments)}var m,g=function(e){var t=Object(i.useRef)(null),n=e.onClick;return Object(i.useEffect)((function(){function e(e){t.current&&!t.current.contains(e.target)&&n(!0)}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[t]),Object(a.jsx)("div",{ref:t,children:e.children})},v=n(42),w=n(13),N=Object(d.a)({root:{display:"flex",alignItems:"center",height:30,width:"100%",border:"1px solid black"},input:{width:"100%",border:"0px none",outline:"none","& :focus":{outline:"none"},lineHeight:"28px"}}),y=function(e){var t=N();return Object(a.jsx)("div",{className:t.root,children:Object(a.jsx)("input",{type:e.type?e.type:"input",className:t.input,required:!0,onChange:e.onChange})})},C=Object(d.a)({root:{display:"flex",alignItems:"center",height:30,width:"100%",border:"1px solid black"},input:{width:"100%",border:"0px none",outline:"none","& :focus":{outline:"none"},lineHeight:"28px"}}),k=function(e){var t=C();return Object(a.jsx)("div",{className:t.root,children:Object(a.jsx)("input",{value:e.value,type:e.type?e.type:"date",className:t.input,required:!0,onChange:e.onChange})})},S=Object(d.a)({root:{display:"flex",alignItems:"center",height:30,width:"100%",border:"1px solid black"},input:{width:"100%",border:"0px none",outline:"none","& :focus":{outline:"none"},lineHeight:"28px"}}),B=function(e){var t=S();return Object(a.jsx)("div",{className:t.root,children:Object(a.jsxs)("select",{className:t.input,required:!0,onChange:e.onChange,children:[Object(a.jsx)("option",{value:"Local",children:"Local"}),Object(a.jsx)("option",{value:"Import",children:"Imported"})]})})},T=(Object(d.a)({root:{display:"flex",alignItems:"center",height:30,width:"100%",border:"1px solid black"},input:{width:"100%",border:"0px none",outline:"none","& :focus":{outline:"none"},lineHeight:"28px"}}),Object(d.a)({root:{display:"flex",alignItems:"center",height:30,width:"100%"},input:{width:"auto",border:"0px none",outline:"none","& :focus":{outline:"none"},lineHeight:"28px"}}),n(9)),I=(n(23),Object(d.a)({root:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-start",paddingLeft:30,position:"relative"},selectionTitle:{width:"100%",fontSize:40,borderBottom:"1px solid black",fontWeight:500,marginBottom:10},selectionField:{display:"flex"},selectionLabel:{fontSize:20},selectionInputField:{width:"400px",marginLeft:20,marginTop:5,marginBottom:5},selectionInputIDField:{width:"160px",marginLeft:20,marginTop:5,marginBottom:5},nextPage:{marginTop:20,width:120,height:40,color:"black",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"bold",cursor:"pointer",fontSize:15,borderRadius:5,position:"absolute",right:15,border:"1px solid black"},input:{width:"50%",background:"grey",border:"0px none",outline:"none","& :focus":{outline:"none"},lineHeight:"28px"},autofillBtn:(m={marginTop:20,height:20,color:"black",backgroundColor:"lightgrey",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",fontSize:13,border:"1px solid black",borderRadius:3,marginLeft:15},Object(w.a)(m,"marginTop",5),Object(w.a)(m,"marginBottom",5),m),autofillBtnContainer:{},submitBtn:{marginTop:20,width:"10%",height:40,color:"white",backgroundColor:"black",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"bold",cursor:"pointer",fontSize:20},btnContainer:{position:"relative"}})),D=function(e){var t=I(),n=Object(i.useState)(e.patient?e.patient.patientName:""),c=Object(s.a)(n,2),r=c[0],o=c[1],l=Object(i.useState)(e.patient?e.patient.patientID:""),d=Object(s.a)(l,2),u=d[0],f=d[1],p=Object(i.useState)(e.patient?e.patient.patientDOB:""),h=Object(s.a)(p,2),x=h[0],m=h[1],g=Object(i.useState)(e.patient?e.patient.dateConfirmed:""),v=Object(s.a)(g,2),w=v[0],N=v[1],y=Object(i.useState)(e.patient?e.patient.localImported:"Local"),C=Object(s.a)(y,2),S=C[0],T=C[1],D=Object(i.useState)(e.patient?e.patient.virusName:""),P=Object(s.a)(D,2),L=P[0],F=P[1],R=function(){var e=Object(b.a)(j.a.mark((function e(){var t,n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===u){e.next=7;break}return t=0,e.next=4,O("getPatientInfo",[]);case 4:for(n=e.sent,a=0;a<n.length;a++)n[a].hkid==u&&(o(n[a].patient_name),m(n[a].birth_date),t=1);0==t&&alert("No matching record");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){e.virusList.lengh<=0&&(alert("Please add virus first"),window.location.reload())}),[]),Object(a.jsxs)("div",{className:t.root,children:[Object(a.jsx)("div",{className:t.selectionTitle,children:"Patient Information"}),Object(a.jsxs)("div",{className:t.selectionField,children:[Object(a.jsx)("div",{className:t.selectionLabel,children:"Patient ID Document Number:"}),Object(a.jsx)("div",{className:t.selectionInputIDField,children:Object(a.jsx)("input",{value:u,onChange:function(e){return f(e.target.value)}})}),Object(a.jsx)("div",{className:t.autofillBtnContainer,children:Object(a.jsx)("div",{className:t.autofillBtn,onClick:R,children:"Autofill existing patient info"})})]}),Object(a.jsxs)("div",{className:t.selectionField,children:[Object(a.jsx)("div",{className:t.selectionLabel,children:"Patient Name:"}),Object(a.jsx)("div",{className:t.selectionInputField,children:Object(a.jsx)("input",{value:r,onChange:function(e){return o(e.target.value)}})})]}),Object(a.jsxs)("div",{className:t.selectionField,children:[Object(a.jsx)("div",{className:t.selectionLabel,children:"Date of Birth:"}),Object(a.jsx)("div",{className:t.selectionInputField,children:Object(a.jsx)(k,{value:x,onChange:function(e){return m(e.target.value)}})})]}),Object(a.jsxs)("div",{className:t.selectionField,children:[Object(a.jsx)("div",{className:t.selectionLabel,children:"Date Confirmed:"}),Object(a.jsx)("div",{className:t.selectionInputField,children:Object(a.jsx)(k,{value:w,onChange:function(e){return N(e.target.value)}})})]}),Object(a.jsxs)("div",{className:t.selectionField,children:[Object(a.jsx)("div",{className:t.selectionLabel,children:"Local/Imported:"}),Object(a.jsx)("div",{className:t.selectionInputField,children:Object(a.jsx)(B,{value:S,onChange:function(e){return T(e.target.value)}})})]}),Object(a.jsx)("div",{className:t.selectionTitle,children:"Virus Information"}),Object(a.jsxs)("div",{className:t.selectionField,children:[Object(a.jsx)("div",{className:t.selectionLabel,children:"Virus Name:"}),Object(a.jsx)("div",{className:t.selectionInputField,children:Object(a.jsxs)("select",{className:"category",value:L,onChange:function(e){return F(e.target.value)},children:[Object(a.jsx)("option",{value:"",disabled:!0,selected:!0,hidden:!0,children:"Please Choose..."}),e.virusList.length>0&&e.virusList.map((function(e,t){return Object(a.jsx)("option",{value:e.virus_name,children:e.virus_name},t)}))]})})]}),Object(a.jsx)("div",{className:t.selectionField}),Object(a.jsx)("div",{className:t.btnContainer,children:Object(a.jsx)("div",{className:t.nextPage,onClick:function(){if(""!==r&&""!==u&&""!==x&&""!==w&&""!==S&&""!==L){var t={patientName:r,patientID:u,patientDOB:x,virusName:L,dateConfirmed:w,localImported:S};e.onPageChange(1,t,null)}else alert("Missing some field")},children:"Next Page"})})]})},P=n(17),L=n(10),F=n.n(L),R=Object(d.a)({root:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-start",paddingLeft:30,position:"relative"},selectionTitle:{width:"100%",fontSize:40,borderBottom:"1px solid black",fontWeight:500,marginBottom:10},selectionField:{display:"flex"},selectionLabel:{fontSize:20},nextPage:{cursor:"pointer",textDecoration:" underline",position:"absolute",bottom:0,right:20},searchBtn:{marginLeft:10,cursor:"pointer"},locationBox:{},backBtn:{marginTop:20,width:60,height:40,color:"black",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"bold",cursor:"pointer",fontSize:15,borderRadius:5,position:"absolute",left:0,border:"1px solid black"},submitBtn:{marginTop:20,width:60,height:40,color:"black",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"bold",cursor:"pointer",fontSize:15,borderRadius:5,position:"absolute",right:30,border:"1px solid black"},addBtn:{marginTop:20,width:150,height:40,color:"white",backgroundColor:"black",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"bold",cursor:"pointer",fontSize:18,borderRadius:5},closeBtn:{cursor:"pointer"},searchContainer:{position:"relative"},BtnContainer:{display:"flex",justifyContent:"center",position:"relative"},resultRow:{display:"flex",flexDirection:"column",border:"1px solid black",cursor:"pointer","&:hover":{backgroundColor:"grey"}},placeName:{fontWeight:"bold"},address:{fontSize:13},dropDown:{position:"absolute",maxHeight:500,overflowY:"scroll",display:"flex",flexDirection:"column",border:"1px solid black",backgroundColor:"white","& > div":{paddingLeft:10},zIndex:1}}),H=function(e){var t=R(),n=Object(i.useState)(e.data.category),c=Object(s.a)(n,2),r=c[0],o=c[1],l=Object(i.useState)(e.data.dateFrom),d=Object(s.a)(l,2),u=d[0],f=d[1],h=Object(i.useState)(e.data.dateTo),x=Object(s.a)(h,2),m=x[0],g=x[1],v=Object(i.useState)(e.data.location?e.data.location.nameEN:""),w=Object(s.a)(v,2),N=w[0],y=w[1],C=Object(i.useState)(""),k=Object(s.a)(C,2),S=k[0],B=k[1],T=Object(i.useState)(!1),I=Object(s.a)(T,2),D=I[0],P=I[1],L=Object(i.useState)(e.data.location),F=Object(s.a)(L,2),H=F[0],z=F[1],_=Object(i.useState)(null),E=Object(s.a)(_,2),W=E[0],V=E[1],M=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===N){e.next=5;break}return e.next=3,O("searchLocation",{locationTerm:N});case 3:"Error"!=(t=e.sent)?B(t):alert("No matching record");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){H&&(V(H),z(null),B(""))}),[H]),Object(i.useEffect)((function(){var t={category:r,dateFrom:u,dateTo:m,location:W};e.onRecordChange(t)}),[r,u,m,W]);return Object(a.jsx)(a.Fragment,{children:!D&&Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:Object(a.jsxs)("select",{className:"category",value:r,onChange:function(e){return o(e.target.value)},children:[Object(a.jsx)("option",{value:"Residence",children:"Residence"}),Object(a.jsx)("option",{value:"Workplace",children:"Workplace"}),Object(a.jsx)("option",{value:"Visit",children:"Visit"})]})}),Object(a.jsx)("td",{children:Object(a.jsx)("input",{type:"date",className:"dateFrom",value:u,onChange:function(e){return t=e.target.value,"Visit"===r&&g(t),void(t>m&&""!==m?alert("Date from can only be earilier than date to"):f(t));var t}})}),Object(a.jsx)("td",{children:Object(a.jsx)("input",{type:"date",className:"dateTo",value:m,onChange:function(e){return t=e.target.value,"Visit"===r&&f(t),void(t<u&&""!==u?alert("Date to can only be later than date from"):g(t));var t}})}),Object(a.jsx)("td",{className:t.locationBox,children:Object(a.jsxs)("div",{className:t.searchContainer,children:[Object(a.jsx)("input",{type:"text",value:N,onChange:function(e){return y(e.target.value)}}),Object(a.jsx)("i",{className:p()("fa fa-search",t.searchBtn),onClick:M}),""!==S&&!H&&Object(a.jsx)("div",{className:t.dropDown,children:S.map((function(e){return Object(a.jsxs)("div",{className:t.resultRow,onClick:function(){z(e),y(e.nameEN)},children:[Object(a.jsx)("div",{className:t.placeName,children:e.nameEN}),Object(a.jsx)("div",{className:t.address,children:e.addressEN})]})}))})]})}),Object(a.jsx)("td",{children:Object(a.jsx)("i",{className:p()(t.closeBtn,"fa fa-window-close"),onClick:function(){e.onDeleteRow()&&P(!0)}})})]})})},z=function(e){var t=Object(i.useState)(0),n=Object(s.a)(t,2),c=(n[0],n[1],R()),r={category:"Residence",dateFrom:"",dateTo:"",location:null,result:[]},o=Object(i.useState)(e.locationRecord),d=Object(s.a)(o,2),u=d[0],j=d[1];console.log(u);return Object(a.jsxs)("div",{className:c.root,children:[Object(a.jsx)("div",{className:c.selectionTitle,children:"Add Location Record"}),Object(a.jsxs)("table",{className:c.empTable,children:[Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Category"}),Object(a.jsx)("th",{children:"Date From"}),Object(a.jsx)("th",{children:"Date To"}),Object(a.jsx)("th",{children:"Location"}),Object(a.jsx)("th",{children:"Delete"})]}),Object(a.jsx)("tbody",{children:u.map((function(e,t){return e?Object(a.jsx)(H,{onRecordChange:function(e){return function(e,t){var n=Object(P.a)(u);n[t]=e,j(n)}(e,t)},onDeleteRow:function(){return function(e){var t=F.a.filter(u,(function(e){if(e){var t=e.dateFrom,n=e.dateTo,a=e.location;return!(""===t||""===n||!a)}return!1})),n=u[e],a=n.dateFrom,i=n.dateTo,c=n.location,r=u.length>1;if(console.log(t,r),!(t.length>1)){if((""===a||""===i||!c)&&r){var o=Object(P.a)(u);return o[e]=null,j(o),!0}return alert("You need at least one location record"),!1}var s=Object(P.a)(u);return s[e]=null,j(s),!0}(t)},data:u[t]}):Object(a.jsx)(a.Fragment,{})}))})]}),Object(a.jsxs)("div",{className:c.BtnContainer,children:[Object(a.jsx)("div",{className:c.backBtn,onClick:function(){return e.onPageChange(0,null,u)},children:"Back"}),Object(a.jsx)("div",{className:c.addBtn,onClick:function(){for(var e,t=u.length-1;t>=0;t--)if(u[t]){e=u[t];break}var n=e,a=n.dateFrom,i=n.dateTo,c=n.location;if(""!==a&&""!==i&&c){var o=Object(l.a)({},r);j((function(e){return e.concat(o)}))}else alert("Missing some fields")},children:"Add"}),Object(a.jsx)("div",{className:c.submitBtn,onClick:function(){u.some((function(e){if(e){var t=e.dateFrom,n=e.dateTo,a=e.location;return""===t||""===n||!a}return!1}))?alert("Missing some fields"):(console.log(u),e.submitForm(u))},children:"Submit"})]})]})},_=function(e){var t=Object(i.useState)(0),n=Object(s.a)(t,2),c=n[0],r=n[1],o=Object(i.useState)(null),d=Object(s.a)(o,2),u=d[0],f=d[1],p=Object(i.useState)([]),h=Object(s.a)(p,2),x=h[0],m=h[1],g=Object(i.useState)([Object(l.a)({},{category:"Residence",dateFrom:"",dateTo:"",location:null})]),v=Object(s.a)(g,2),w=v[0],N=v[1],y=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N(t),!((n=F.a.filter(t,(function(e){return e}))).length>0)){e.next=7;break}return e.next=5,O("submitCase",{patient:u,location:n});case 5:"Success"===e.sent.status&&(window.alert("You have successfully input the patient info."),window.location.reload());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(e,t,n){t&&f(t),n&&N(n),r(e)};return Object(i.useEffect)((function(){Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("getAllVirus",[]);case 2:(t=e.sent).length<1&&(alert("Please add virus first!"),window.location.reload()),m(t);case 5:case"end":return e.stop()}}),e)})))()}),[]),Object(a.jsx)(a.Fragment,{children:0===c?Object(a.jsx)(D,{onPageChange:C,patient:u,virusList:x}):Object(a.jsx)(z,{onPageChange:C,locationRecord:w,submitForm:y})})},E=(n(40),Object(d.a)({root:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-start",paddingLeft:30,position:"relative"},bigTitle:{width:"100%",fontSize:40,borderBottom:"1px solid black",fontWeight:500,marginBottom:10},row:{cursor:"pointer"}})),W=Object(d.a)({root:{position:"relative",display:"flex",flexDirection:"column"},container:{display:"grid",gridTemplateColumns:"1fr 1fr"},backBtn:{position:"absoulte",top:10,left:0,height:30,width:60,borderRadius:6,border:"1px solid black",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginBottom:20},row:{marginBottom:20}}),V=function(e){var t=W(),n=e.case,c=Object(i.useState)([]),r=Object(s.a)(c,2),o=r[0],d=r[1],u=[{Header:"Date From",accessor:"date_from"},{Header:"Date To",accessor:"date_to"},{Header:"Name of Location",accessor:"location_name"},{Header:"Address",accessor:"address"},{Header:"Category",accessor:"category"}],j=Object(i.useMemo)((function(){return u}),[]);Object(i.useEffect)((function(){for(var e=function(e){var t=Object(l.a)(Object(l.a)({},n.locations[e]),n.visited[e]);d((function(e){return e.concat(t)}))},t=0;t<n.locations.length;t++)e(t)}),[]);var b=Object(T.useTable)({columns:j,data:o}),f=(b.getTableProps,b.getTableBodyProps),p=b.headerGroups,h=b.rows,O=b.prepareRow;return Object(a.jsxs)("div",{className:t.root,children:[Object(a.jsx)("div",{className:t.backBtn,onClick:e.onBack,children:"Back"}),Object(a.jsxs)("div",{className:t.container,children:[Object(a.jsxs)("div",{className:t.row,children:["Case ID: ",n.case.case_no]}),Object(a.jsx)("div",{}),Object(a.jsxs)("div",{className:t.row,children:["Patient Name: ",n.patient.patient_name]}),Object(a.jsxs)("div",{className:t.row,children:["Confirmed Date: ",n.case.date_confirmed]}),Object(a.jsxs)("div",{className:t.row,children:["ID number: ",n.patient.hkid]}),Object(a.jsxs)("div",{className:t.row,children:["Local/Imported: ",n.case.local_or_imported]}),Object(a.jsxs)("div",{className:t.row,children:["Virus Name: ",n.virus.common_name]}),Object(a.jsxs)("div",{className:t.row,children:["Date of birth: ",n.patient.birth_date]})]}),n.locations.length>0&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:t.row,children:"Location visited:"}),Object(a.jsxs)("table",{children:[Object(a.jsx)("thead",{children:p.map((function(e){return Object(a.jsx)("tr",Object(l.a)(Object(l.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(a.jsx)("th",Object(l.a)(Object(l.a)({},e.getHeaderProps()),{},{children:e.render("Header")}))}))}))}))}),Object(a.jsx)("tbody",Object(l.a)(Object(l.a)({},f()),{},{children:h.map((function(e){return O(e),Object(a.jsx)("tr",Object(l.a)(Object(l.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(a.jsx)("td",Object(l.a)(Object(l.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]})]})]})},M=function(e){var t=Object(i.useState)([]),n=Object(s.a)(t,2),c=n[0],r=n[1],o=Object(i.useState)(null),d=Object(s.a)(o,2),u=d[0],f=d[1],p=E(),h=[{Header:"CaseId",accessor:"case_no"},{Header:"Patient",accessor:"patient_name"},{Header:"Virus",accessor:"virus_name"},{Header:"Date Confirmed",accessor:"date_confirmed"}],x=Object(i.useMemo)((function(){return h}),[]);Object(i.useEffect)((function(){Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("getAllCase",[]);case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))()}),[]);var m=Object(T.useTable)({columns:x,data:c}),g=(m.getTableProps,m.getTableBodyProps),v=m.headerGroups,w=m.rows,N=m.prepareRow,y=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("getCaseById",{id:t.values.case_no});case 2:n=e.sent,f(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:p.root,children:[Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:p.bigTitle,children:"View Record"})}),c.length>0&&!u&&Object(a.jsxs)("table",{children:[Object(a.jsx)("thead",{children:v.map((function(e){return Object(a.jsx)("tr",Object(l.a)(Object(l.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(a.jsx)("th",Object(l.a)(Object(l.a)({},e.getHeaderProps()),{},{children:e.render("Header")}))}))}))}))}),Object(a.jsx)("tbody",Object(l.a)(Object(l.a)({},g()),{},{children:w.map((function(e){return N(e),Object(a.jsx)("tr",Object(l.a)(Object(l.a)({},e.getRowProps()),{},{onClick:function(){y(e)},className:p.row,children:e.cells.map((function(e){return Object(a.jsx)("td",Object(l.a)(Object(l.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]}),0===c.length&&!u&&Object(a.jsx)("div",{children:"There is no record"}),u&&Object(a.jsx)(V,{case:u,onBack:function(){return f(null)}})]})},A=Object(d.a)({root:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-start",paddingLeft:30,position:"relative"},bigTitle:{width:"100%",fontSize:40,borderBottom:"1px solid black",fontWeight:500,marginBottom:10},selectionField:{display:"flex"},selectionLabel:{fontSize:20},submitBtn:{marginTop:20,width:"10%",height:40,color:"white",backgroundColor:"black",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"bold",cursor:"pointer",fontSize:20}}),G=function(e){var t=A(),n=Object(i.useState)(""),c=Object(s.a)(n,2),r=c[0],o=c[1],d=Object(i.useState)(""),u=Object(s.a)(d,2),f=u[0],p=u[1],h=Object(i.useState)(""),x=Object(s.a)(h,2),m=x[0],g=x[1],v=Object(i.useState)([]),w=Object(s.a)(v,2),N=w[0],y=w[1],C=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m&&r&&f){e.next=4;break}alert("Missing some fields"),e.next=14;break;case 4:if(!isNaN(m)){e.next=8;break}alert("Max inflectious period should be a number"),e.next=14;break;case 8:return e.next=10,O("addVinfo",{vname:r,disease:f,maxp:m});case 10:o(""),p(""),g(""),window.alert("You have successfully input the virus info.");case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=[{Header:"Virus Name",accessor:"virus_name"},{Header:"Disease",accessor:"common_name"},{Header:"Max. Infectious Period (days)",accessor:"max_infect_period"}],S=Object(i.useMemo)((function(){return k}),[]);Object(i.useEffect)((function(){Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("getAllVirus",[]);case 2:t=e.sent,y(t);case 4:case"end":return e.stop()}}),e)})))()}),[r]);var B=Object(T.useTable)({columns:S,data:N}),I=(B.getTableProps,B.getTableBodyProps),D=B.headerGroups,P=B.rows,L=B.prepareRow;return Object(a.jsxs)("div",{className:t.root,children:[Object(a.jsx)("div",{className:t.bigTitle,children:"Virus Info Page"}),Object(a.jsxs)("div",{className:t.selectionField,children:[Object(a.jsx)("div",{className:t.selectionLabel,children:"Virus Name: "}),Object(a.jsx)("input",{value:r,onChange:function(e){return o(e.target.value)}})]}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:t.selectionField,children:[Object(a.jsx)("div",{className:t.selectionLabel,children:"Disease: "}),Object(a.jsx)("input",{value:f,onChange:function(e){return p(e.target.value)}})]}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:t.selectionField,children:[Object(a.jsx)("div",{className:t.selectionLabel,children:"Max. Infectious Period:"}),Object(a.jsx)("input",{value:m,onChange:function(e){return g(e.target.value)}})]}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{className:t.submitBtn,onClick:C,children:"Submit"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),N.length>0&&Object(a.jsxs)("table",{children:[Object(a.jsx)("thead",{children:D.map((function(e){return Object(a.jsx)("tr",Object(l.a)(Object(l.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(a.jsx)("th",Object(l.a)(Object(l.a)({},e.getHeaderProps()),{},{children:e.render("Header")}))}))}))}))}),Object(a.jsx)("tbody",Object(l.a)(Object(l.a)({},I()),{},{children:P.map((function(e){return L(e),Object(a.jsx)("tr",Object(l.a)(Object(l.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(a.jsx)("td",Object(l.a)(Object(l.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]})]})},U=Object(d.a)({root:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-start",paddingLeft:30,position:"relative"},bigTitle:{width:"100%",fontSize:40,borderBottom:"1px solid black",fontWeight:500,marginBottom:10},selectionField:{display:"flex"},selectionLabel:{fontSize:20},submitBtn:{marginTop:20,width:"10%",height:40,color:"white",backgroundColor:"black",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"bold",cursor:"pointer",fontSize:20}}),Y=Object(d.a)({root:{display:"flex",flexDirection:"column",position:"relative",padding:"30px 20px 20px 20px"},setting:{width:"10%",height:40,color:"white",backgroundColor:"grey",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"bold",fontSize:20,cursor:"pointer",position:"absolute",right:20,top:"30px"},bigTitle:{fontSize:40,fontWeight:500,marginBottom:10,marginRight:30},top:{width:"100%",borderBottom:"1px solid black",display:"flex",alignItems:"center"},option:{width:50,height:"40px"}}),q=function(e){var t=U(),n=Object(i.useState)(""),c=Object(s.a)(n,2),r=c[0],o=c[1],l=Object(i.useState)(""),d=Object(s.a)(l,2),u=d[0],j=d[1],b=Object(i.useState)(""),f=Object(s.a)(b,2),p=f[0],h=f[1];return Object(a.jsxs)("div",{className:t.root,children:[Object(a.jsx)("div",{className:t.bigTitle,children:"Setting"}),Object(a.jsxs)("div",{className:t.selectionField,children:[Object(a.jsx)("div",{className:t.selectionLabel,children:"D value(in meter): "}),Object(a.jsx)("input",{value:r,onChange:function(e){return o(e.target.value)}})]}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:t.selectionField,children:[Object(a.jsx)("div",{className:t.selectionLabel,children:"T value(in day): "}),Object(a.jsx)("input",{value:u,onChange:function(e){return j(e.target.value)}})]}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:t.selectionField,children:[Object(a.jsx)("div",{className:t.selectionLabel,children:"C value(cluster size):"}),Object(a.jsx)("input",{value:p,onChange:function(e){return h(e.target.value)}})]}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{className:t.submitBtn,onClick:function(){r&&u&&p?isNaN(r)||isNaN(u)||isNaN(p)?alert("All the fields should be a number."):e.onSettingSaved(r,u,p):alert("Missing some fields")},children:"Save"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{})]})},J=function(e){var t=Object(v.a)(["cookie-name"]),n=Object(s.a)(t,2),c=n[0],r=n[1],o=Object(i.useState)("data"),d=Object(s.a)(o,2),u=d[0],f=d[1],p=Object(i.useState)(new Array(0)),h=Object(s.a)(p,2),x=h[0],m=h[1],g=Object(i.useState)(c.D||200),w=Object(s.a)(g,2),N=w[0],y=w[1],C=Object(i.useState)(c.T||3),k=Object(s.a)(C,2),S=k[0],B=k[1],I=Object(i.useState)(c.C||2),D=Object(s.a)(I,2),P=D[0],L=D[1],F=Object(i.useState)(0),R=Object(s.a)(F,2),H=R[0],z=R[1],_=x.length>0?x[H]:[],E=Y();Object(i.useEffect)((function(){Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("findCluster",{Dvalue:N,Tvalue:S,Cvalue:P});case 2:(t=e.sent)&&m(t.clusters),console.log(t);case 5:case"end":return e.stop()}}),e)})))()}),[N,S,P]);var W=[{Header:"Location Name",accessor:"locationName"},{Header:"X",accessor:"x"},{Header:"Y",accessor:"y"},{Header:"Date of visit",accessor:"date"},{Header:"Case Number",accessor:"caseNo"}],V=Object(i.useMemo)((function(){return W}),[]),M=Object(T.useTable)({columns:V,data:_}),A=(M.getTableProps,M.getTableBodyProps),G=M.headerGroups,U=M.rows,J=M.prepareRow;return Object(a.jsxs)(a.Fragment,{children:["data"===u&&Object(a.jsxs)("div",{className:E.root,children:[Object(a.jsxs)("div",{className:E.setting,onClick:function(){return f("setting")},children:[" ","Setting"]}),Object(a.jsxs)("div",{className:E.top,children:[Object(a.jsx)("div",{className:E.bigTitle,children:"Clusters"}),x.length>0&&Object(a.jsx)("select",{className:E.option,selected:H,onChange:function(e){return z(e.target.value)},children:x.map((function(e,t){return Object(a.jsx)("option",{value:t,children:t+1})}))})]}),x.length>0&&_.length>0&&Object(a.jsxs)("table",{children:[Object(a.jsx)("thead",{children:G.map((function(e){return Object(a.jsx)("tr",Object(l.a)(Object(l.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(a.jsx)("th",Object(l.a)(Object(l.a)({},e.getHeaderProps()),{},{children:e.render("Header")}))}))}))}))}),Object(a.jsx)("tbody",Object(l.a)(Object(l.a)({},A()),{},{children:U.map((function(e){return J(e),Object(a.jsx)("tr",Object(l.a)(Object(l.a)({},e.getRowProps()),{},{className:E.row,children:e.cells.map((function(e){return Object(a.jsx)("td",Object(l.a)(Object(l.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]}),0===x.length&&Object(a.jsx)("div",{children:"There is no cluster"})]}),"setting"===u&&Object(a.jsx)(q,{onSettingSaved:function(e,t,n){y(e),B(t),L(n),r("D",e),r("T",t),r("C",n),alert("Setting saved"),f("data")}})]})},X=Object(d.a)({root:{display:"grid",gridTemplateColumns:"1.25fr 6fr",gridTemplateRows:"1fr 8fr",padding:"30px 20px 20px 20px"},menuPanel:{width:"100%",display:"flex",flexDirection:"column",paddingTop:20},searchResult:{"& > div":{marginBottom:10}},inputBox:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"3px 10px 3px 10px",border:"1px solid gray",borderRadius:15,height:30,width:200,marginBottom:20},input:{border:"0px none",outline:"none","& :focus":{outline:"none"}},submitBtn:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-evenly",padding:"3px 10px 3px 10px",border:"1px solid gray",borderRadius:15,height:30,width:100,marginBottom:20,backgroundColor:"greenyellow",cursor:"pointer"},flex:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-evenly"},inputs:{display:"grid",gridTemplateColumns:"1fr 3fr",gridTemplateRows:"1fr 1fr 1fr 1fr 1fr",rowGap:"1em",width:"100%",marginBottom:10,"& div":{marginRight:15,fontSize:30}},menuOptions:{width:"100%",textAlign:"center",fontSize:20,marginBottom:10,height:"1.5em",cursor:"pointer"},sectionTitle:{fontSize:45,width:"100%",borderBottom:"1px solid grey",marginBottom:"10px"},addNew:{boxShadow:"1px 2px",border:"1px solid grey",borderRadius:"20px"},menuBtn:{fontSize:25,cursor:"pointer",marginRight:5},title:{fontSize:45,fontWeight:"bold",cursor:"pointer"},account:{width:"100%",display:"flex",justifyContent:"flex-end",position:"relative",alignItems:"center"},username:{cursor:"pointer",textDecoration:" underline"},accountOption:{position:"absolute",top:0,right:0,display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"center",boxShadow:"1px 2px",border:"1px solid grey",backgroundColor:"lightgrey",width:200,height:50,borderRadius:5,padding:5,"& > *:not(:first-child)":{marginTop:10},"& div":{cursor:"pointer",textDecoration:" underline"}},searchBtn:{fontSize:20,cursor:"pointer"},unselected:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",fontSize:50}}),Z=(Object(d.a)({root:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-start",paddingLeft:30},selectionTitle:{width:"100%",fontSize:40,borderBottom:"1px solid black",fontWeight:500,marginBottom:10},selectionField:{display:"flex"},selectionLabel:{fontSize:20}}),function(){var e=X(),t=Object(i.useState)(""),n=Object(s.a)(t,2),c=n[0],r=n[1],o=ne(),l=Object(s.a)(o,2),d=l[0].username,u=l[1],f=Object(i.useState)(!1),h=Object(s.a)(f,2),x=h[0],m=h[1],w=Object(v.a)(["cookie-name"]),N=Object(s.a)(w,3),y=(N[0],N[1],N[2]);Object(i.useEffect)((function(){Object(b.a)(j.a.mark((function e(){var t,n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("getUserInfo");case 2:"Success"===(t=e.sent).status&&(n=t.username,a=t.first+" "+t.last,u({type:"SET_USER",username:n,name:a}));case 4:case"end":return e.stop()}}),e)})))()}),[]);var C=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("signout");case 2:"Success"===e.sent.status&&(y("token"),window.location.reload());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:e.root,children:[Object(a.jsx)("div",{className:e.flex,children:Object(a.jsx)("span",{className:e.title,onClick:function(){return r("")},children:"HotZone"})}),Object(a.jsxs)("div",{className:e.account,children:[x&&Object(a.jsx)(g,{onClick:function(e){m(!e)},children:Object(a.jsx)("div",{className:e.accountOption,children:Object(a.jsx)("div",{onClick:C,children:"Logout"})})}),Object(a.jsx)("div",{className:e.username,onClick:function(){return m(!0)},children:d})]}),Object(a.jsxs)("div",{className:e.menuPanel,children:[Object(a.jsx)("div",{onClick:function(){r("addNewRecord")},value:"add",className:p()(e.addNew,e.menuOptions),children:"New record"}),Object(a.jsx)("div",{className:p()(e.addNew,e.menuOptions),onClick:function(){return r("viewRecord")},children:"View Records"}),Object(a.jsx)("div",{className:p()(e.addNew,e.menuOptions),onClick:function(){return r("virusInfo")},children:"Virus Info"}),Object(a.jsx)("div",{className:p()(e.addNew,e.menuOptions),onClick:function(){return r("clustering")},children:"Clustering"})]}),""===c&&Object(a.jsx)("div",{className:e.unselected,children:"Please choose from the left options"}),"addNewRecord"===c&&Object(a.jsx)(_,{}),"viewRecord"===c&&Object(a.jsx)(M,{}),"virusInfo"===c&&Object(a.jsx)(G,{}),"clustering"===c&&Object(a.jsx)(J,{})]})}),K=Object(d.a)({root:{width:"100%",height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},title:{fontSize:50,fontWeight:"bold"},loginBox:{width:500,padding:"30px 10px 30px 10px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",border:"1px solid black"},column:{display:"flex",flexDirection:"column",marginBottom:10,width:"100%"},loginBtn:{marginTop:20,width:"60%",height:50,color:"white",backgroundColor:"black",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"bold",cursor:"pointer",fontSize:25}}),Q=function(e){var t=K(),n=Object(i.useState)(""),c=Object(s.a)(n,2),r=c[0],o=c[1],l=Object(i.useState)(""),d=Object(s.a)(l,2),u=d[0],f=d[1],p=function(){var t=Object(b.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===r||""===u){t.next=5;break}return t.next=3,O("signin",{username:r,password:u});case 3:"Success"===(n=t.sent).status?e.onLoginSuccess(n.token):alert("Please enter correct information.");case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:t.root,children:[Object(a.jsx)("div",{className:t.title,children:"Hotzone"}),Object(a.jsxs)("div",{className:t.loginBox,children:[Object(a.jsxs)("div",{className:t.column,children:[Object(a.jsx)("div",{children:"Username"}),Object(a.jsx)(y,{onChange:function(e){return o(e.target.value)}})]}),Object(a.jsxs)("div",{className:t.column,children:[Object(a.jsx)("div",{children:"Password"}),Object(a.jsx)(y,{onChange:function(e){return f(e.target.value)},type:"password"})]}),Object(a.jsx)("div",{className:t.loginBtn,onClick:p,children:"Login"})]})]})},$=Object(i.createContext)({}),ee=function(e,t){if("SET_USER"===t.type){var n=F.a.pick(t,["username","name"]);return Object(l.a)(Object(l.a)({},e),n)}return e},te={username:"",name:""};var ne=function(){return Object(i.useContext)($)},ae=function(){var e=Object(i.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(v.a)(["cookie-name"]),o=Object(s.a)(r,3),l=o[0],d=o[1],u=(o[2],Object(i.useReducer)(ee,te)),j=Object(s.a)(u,2),b=j[0],f=j[1];return Object(i.useEffect)((function(){l.token&&c(!0)}),[]),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)($.Provider,{value:[b,f],children:Object(a.jsx)("div",{children:n?Object(a.jsx)(Z,{}):Object(a.jsx)(Q,{onLoginSuccess:function(e){return function(e){c(!0),d("token",e)}(e)}})})})})},ie=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,43)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),c(e),r(e)}))};o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(ae,{})}),document.getElementById("root")),ie()}},[[41,1,2]]]);
//# sourceMappingURL=main.acd84edc.chunk.js.map