{"ast":null,"code":"import _objectSpread from\"/Users/johnny/hotzone/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/johnny/hotzone/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/johnny/hotzone/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/johnny/hotzone/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useEffect,useState,useMemo}from\"react\";import{createUseStyles}from\"react-jss\";import cn from\"classnames\";import{useRootState}from\"@/App.js\";import{request}from\"@/request.js\";import ClickAway from\"@/components/Utils/ClickAway\";import{useTable}from\"react-table\";import\"../../table_virus.css\";var tableStyle=createUseStyles({root:{width:\"100%\",display:\"flex\",flexDirection:\"column\",justifyContent:\"flex-start\",paddingLeft:30,position:\"relative\"},bigTitle:{width:\"100%\",fontSize:40,borderBottom:\"1px solid black\",fontWeight:500,marginBottom:10},selectionField:{display:\"flex\"},selectionLabel:{fontSize:20},submitBtn:{marginTop:20,width:\"10%\",height:40,color:\"white\",backgroundColor:\"black\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",fontWeight:\"bold\",cursor:\"pointer\",fontSize:20}});var VirusInfo=function VirusInfo(props){var classes=tableStyle();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),vname=_useState2[0],setVname=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),disease=_useState4[0],setDisease=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),maxp=_useState6[0],setMaxp=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),data=_useState8[0],setData=_useState8[1];var vinfo=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(!maxp||!vname||!disease)){_context.next=4;break;}alert(\"Missing some fields\");_context.next=15;break;case 4:if(!isNaN(maxp)){_context.next=8;break;}alert(\"Max inflectious period should be a number\");_context.next=15;break;case 8:_context.next=10;return request(\"addVinfo\",{vname:vname,disease:disease,maxp:maxp});case 10:setVname(\"\");setDisease(\"\");setMaxp(\"\");window.alert(\"You have successfully input the virus info.\");window.location.reload();case 15:case\"end\":return _context.stop();}}},_callee);}));return function vinfo(){return _ref.apply(this,arguments);};}();var COLUMNS=[{Header:\"Virus Name\",accessor:\"virus_name\"},{Header:\"Disease\",accessor:\"common_name\"},{Header:\"Max. Infectious Period (days)\",accessor:\"max_infect_period\"}];var columns=useMemo(function(){return COLUMNS;},[]);useEffect(function(){;_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return request(\"getAllVirus\",[]);case 2:result=_context2.sent;setData(result);case 4:case\"end\":return _context2.stop();}}},_callee2);}))();},[]);var tableInstance=useTable({columns:columns,data:data});var getTableProps=tableInstance.getTableProps,getTableBodyProps=tableInstance.getTableBodyProps,headerGroups=tableInstance.headerGroups,rows=tableInstance.rows,prepareRow=tableInstance.prepareRow;return/*#__PURE__*/_jsxs(\"div\",{className:classes.root,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.bigTitle,children:\"Virus Info Page\"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.selectionField,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.selectionLabel,children:\"Virus Name: \"}),/*#__PURE__*/_jsx(\"input\",{value:vname,onChange:function onChange(e){return setVname(e.target.value);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:classes.selectionField,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.selectionLabel,children:\"Disease: \"}),/*#__PURE__*/_jsx(\"input\",{value:disease,onChange:function onChange(e){return setDisease(e.target.value);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:classes.selectionField,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.selectionLabel,children:\"Max. Infectious Period:\"}),/*#__PURE__*/_jsx(\"input\",{value:maxp,onChange:function onChange(e){return setMaxp(e.target.value);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:classes.submitBtn,onClick:vinfo,children:\"Submit\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),data.length>0&&/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:headerGroups.map(function(headerGroup){return/*#__PURE__*/_jsx(\"tr\",_objectSpread(_objectSpread({},headerGroup.getHeaderGroupProps()),{},{children:headerGroup.headers.map(function(column){return/*#__PURE__*/_jsx(\"th\",_objectSpread(_objectSpread({},column.getHeaderProps()),{},{children:column.render(\"Header\")}));})}));})}),/*#__PURE__*/_jsx(\"tbody\",_objectSpread(_objectSpread({},getTableBodyProps()),{},{children:rows.map(function(row){prepareRow(row);return/*#__PURE__*/_jsx(\"tr\",_objectSpread(_objectSpread({},row.getRowProps()),{},{children:row.cells.map(function(cell){return/*#__PURE__*/_jsx(\"td\",_objectSpread(_objectSpread({},cell.getCellProps()),{},{children:cell.render(\"Cell\")}));})}));})}))]})]});};export default VirusInfo;","map":{"version":3,"sources":["/Users/johnny/hotzone/frontend/src/components/Views/VirusInfo.js"],"names":["React","useEffect","useState","useMemo","createUseStyles","cn","useRootState","request","ClickAway","useTable","tableStyle","root","width","display","flexDirection","justifyContent","paddingLeft","position","bigTitle","fontSize","borderBottom","fontWeight","marginBottom","selectionField","selectionLabel","submitBtn","marginTop","height","color","backgroundColor","alignItems","cursor","VirusInfo","props","classes","vname","setVname","disease","setDisease","maxp","setMaxp","data","setData","vinfo","alert","isNaN","window","location","reload","COLUMNS","Header","accessor","columns","result","tableInstance","getTableProps","getTableBodyProps","headerGroups","rows","prepareRow","e","target","value","length","map","headerGroup","getHeaderGroupProps","headers","column","getHeaderProps","render","row","getRowProps","cells","cell","getCellProps"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useMemo } from \"react\"\nimport { createUseStyles } from \"react-jss\"\nimport cn from \"classnames\"\nimport { useRootState } from \"@/App.js\"\nimport { request } from \"@/request.js\"\nimport ClickAway from \"@/components/Utils/ClickAway\"\n\nimport { useTable } from \"react-table\"\nimport \"../../table_virus.css\"\n\nconst tableStyle = createUseStyles({\n  root: {\n    width: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"flex-start\",\n    paddingLeft: 30,\n    position: \"relative\",\n  },\n  bigTitle: {\n    width: \"100%\",\n    fontSize: 40,\n    borderBottom: \"1px solid black\",\n    fontWeight: 500,\n    marginBottom: 10,\n  },\n  selectionField: {\n    display: \"flex\",\n  },\n  selectionLabel: {\n    fontSize: 20,\n  },\n  submitBtn: {\n    marginTop: 20,\n    width: \"10%\",\n    height: 40,\n    color: \"white\",\n    backgroundColor: \"black\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    fontWeight: \"bold\",\n    cursor: \"pointer\",\n    fontSize: 20,\n  },\n})\n\nconst VirusInfo = (props) => {\n  const classes = tableStyle()\n  const [vname, setVname] = useState(\"\")\n  const [disease, setDisease] = useState(\"\")\n  const [maxp, setMaxp] = useState(\"\")\n  const [data, setData] = useState([])\n\n  const vinfo = async () => {\n    if (!maxp || !vname || !disease) {\n      alert(\"Missing some fields\")\n    } else if (isNaN(maxp)) {\n      alert(\"Max inflectious period should be a number\")\n    } else {\n      await request(\"addVinfo\", {\n        vname: vname,\n        disease: disease,\n        maxp: maxp,\n      })\n      setVname(\"\")\n      setDisease(\"\")\n      setMaxp(\"\")\n      window.alert(\"You have successfully input the virus info.\")\n      window.location.reload()\n    }\n  }\n\n  const COLUMNS = [\n    {\n      Header: \"Virus Name\",\n      accessor: \"virus_name\",\n    },\n    {\n      Header: \"Disease\",\n      accessor: \"common_name\",\n    },\n    {\n      Header: \"Max. Infectious Period (days)\",\n      accessor: \"max_infect_period\",\n    },\n  ]\n  const columns = useMemo(() => COLUMNS, [])\n\n  useEffect(() => {\n    ;(async () => {\n      const result = await request(\"getAllVirus\", [])\n      setData(result)\n    })()\n  }, [])\n\n  const tableInstance = useTable({\n    columns,\n    data,\n  })\n  const {\n    getTableProps,\n    getTableBodyProps,\n    headerGroups,\n    rows,\n    prepareRow,\n  } = tableInstance\n\n  return (\n    <div className={classes.root}>\n      <div className={classes.bigTitle}>Virus Info Page</div>\n      <div className={classes.selectionField}>\n        <div className={classes.selectionLabel}>Virus Name: </div>\n        <input value={vname} onChange={(e) => setVname(e.target.value)} />\n      </div>\n      <br />\n      <div className={classes.selectionField}>\n        <div className={classes.selectionLabel}>Disease: </div>\n        <input value={disease} onChange={(e) => setDisease(e.target.value)} />\n      </div>\n      <br />\n      <div className={classes.selectionField}>\n        <div className={classes.selectionLabel}>Max. Infectious Period:</div>\n        <input value={maxp} onChange={(e) => setMaxp(e.target.value)} />\n      </div>\n      <br />\n      <div className={classes.submitBtn} onClick={vinfo}>\n        Submit\n      </div>\n\n      <br />\n      <br />\n      <br />\n\n      {data.length > 0 && (\n        <table>\n          <thead>\n            {headerGroups.map((headerGroup) => (\n              <tr {...headerGroup.getHeaderGroupProps()}>\n                {headerGroup.headers.map((column) => (\n                  <th {...column.getHeaderProps()}>\n                    {column.render(\"Header\")}\n                  </th>\n                ))}\n              </tr>\n            ))}\n          </thead>\n          <tbody {...getTableBodyProps()}>\n            {rows.map((row) => {\n              prepareRow(row)\n              return (\n                <tr {...row.getRowProps()}>\n                  {row.cells.map((cell) => {\n                    return (\n                      <td {...cell.getCellProps()}>{cell.render(\"Cell\")}</td>\n                    )\n                  })}\n                </tr>\n              )\n            })}\n          </tbody>\n        </table>\n      )}\n    </div>\n  )\n}\n\nexport default VirusInfo\n"]},"metadata":{},"sourceType":"module"}