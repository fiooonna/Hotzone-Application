{"ast":null,"code":"import _regeneratorRuntime from\"/Users/johnny/hotzone/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/johnny/hotzone/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/johnny/hotzone/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/Users/johnny/hotzone/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _autofillBtn;import React,{useEffect,useState,useMemo}from\"react\";import{createUseStyles}from\"react-jss\";import cn from\"classnames\";import{useRootState}from\"@/App.js\";import{request}from\"@/request.js\";import ClickAway from\"@/components/Utils/ClickAway\";import LineInput from\"@/components/Utils/LineInput.js\";import DateInput from\"@/components/Utils/DateInput.js\";import LocImpInput from\"@/components/Utils/LocalImportInput.js\";import SearchInput from\"@/components/Utils/SearchInput.js\";import SubmitButton from\"@/components/Utils/SubmitButton.js\";import{useTable}from\"react-table\";import\"../../table_virus.css\";var useInputFormStyle=createUseStyles({root:{width:\"100%\",display:\"flex\",flexDirection:\"column\",justifyContent:\"flex-start\",paddingLeft:30,position:\"relative\"},selectionTitle:{width:\"100%\",fontSize:40,borderBottom:\"1px solid black\",fontWeight:500,marginBottom:10},selectionField:{display:\"flex\"},selectionLabel:{fontSize:20},selectionInputField:{width:\"400px\",marginLeft:20,marginTop:5,marginBottom:5},selectionInputIDField:{width:\"160px\",marginLeft:20,marginTop:5,marginBottom:5},nextPage:{marginTop:20,width:120,height:40,color:\"black\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",fontWeight:\"bold\",cursor:\"pointer\",fontSize:15,borderRadius:5,position:\"absolute\",right:15,border:\"1px solid black\"},input:{width:\"50%\",background:\"grey\",border:\"0px none\",outline:\"none\",\"& :focus\":{outline:\"none\"},lineHeight:\"28px\"},autofillBtn:(_autofillBtn={marginTop:20,height:20,color:\"black\",backgroundColor:\"lightgrey\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",cursor:\"pointer\",fontSize:13,border:\"1px solid black\",borderRadius:3,marginLeft:15},_defineProperty(_autofillBtn,\"marginTop\",5),_defineProperty(_autofillBtn,\"marginBottom\",5),_autofillBtn),autofillBtnContainer:{},submitBtn:{marginTop:20,width:\"10%\",height:40,color:\"white\",backgroundColor:\"black\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",fontWeight:\"bold\",cursor:\"pointer\",fontSize:20},btnContainer:{position:\"relative\"}});var AddPatientInfo=function AddPatientInfo(props){var classes=useInputFormStyle();var _useState=useState(props.patient?props.patient.patientName:\"\"),_useState2=_slicedToArray(_useState,2),patientName=_useState2[0],setPatientName=_useState2[1];var _useState3=useState(props.patient?props.patient.patientID:\"\"),_useState4=_slicedToArray(_useState3,2),patientID=_useState4[0],setIDNumber=_useState4[1];var _useState5=useState(props.patient?props.patient.patientDOB:\"\"),_useState6=_slicedToArray(_useState5,2),patientDOB=_useState6[0],setPatientDOB=_useState6[1];var _useState7=useState(props.patient?props.patient.dateConfirmed:\"\"),_useState8=_slicedToArray(_useState7,2),dateConfirmed=_useState8[0],setDateConfirmed=_useState8[1];var _useState9=useState(props.patient?props.patient.localImported:\"Local\"),_useState10=_slicedToArray(_useState9,2),localImported=_useState10[0],setLocalImported=_useState10[1];var _useState11=useState(props.patient?props.patient.virusName:\"\"),_useState12=_slicedToArray(_useState11,2),virusName=_useState12[0],setVirusName=_useState12[1];console.log(patientDOB,dateConfirmed);// console.log(props.virusList)\nvar pinfo=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(patientName===\"\"||patientID===\"\"||patientDOB===\"\"||dateConfirmed===\"\"||localImported===\"\"||virusName===\"\")){_context.next=3;break;}alert(\"Missing some field\");return _context.abrupt(\"return\");case 3:_context.next=5;return request(\"addPatientinfo\",{patientName:patientName,patientID:patientID,patientDOB:patientDOB,dateConfirmed:dateConfirmed,localImported:localImported,virusName:virusName});case 5:setPatientName(\"\");setIDNumber(\"\");setPatientDOB(\"\");setDateConfirmed(\"\");setLocalImported(\"\");setVirusName(\"\");window.alert(\"You have successfully input the patient and virus info.\");case 12:case\"end\":return _context.stop();}}},_callee);}));return function pinfo(){return _ref.apply(this,arguments);};}();var autofill=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var count,info,i;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(patientID!=='')){_context2.next=7;break;}count=0;_context2.next=4;return request(\"getPatientInfo\",[]);case 4:info=_context2.sent;for(i=0;i<info.length;i++){if(info[i].hkid==patientID){setPatientName(info[i].patient_name);setPatientDOB(info[i].birth_date);count=1;}}if(count==0){alert(\"No matching record\");}case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function autofill(){return _ref2.apply(this,arguments);};}();var nextPage=function nextPage(){if(patientName===\"\"||patientID===\"\"||patientDOB===\"\"||dateConfirmed===\"\"||localImported===\"\"||virusName===\"\"){alert(\"Missing some field\");return;}var patient={patientName:patientName,patientID:patientID,patientDOB:patientDOB,virusName:virusName,dateConfirmed:dateConfirmed,localImported:localImported};props.onPageChange(1,patient,null);};useEffect(function(){if(props.virusList.lengh<=0){alert(\"Please add virus first\");window.location.reload();}},[]);return/*#__PURE__*/_jsxs(\"div\",{className:classes.root,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.selectionTitle,children:\"Patient Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.selectionField,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.selectionLabel,children:\"Patient ID Document Number:\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.selectionInputIDField,children:/*#__PURE__*/_jsx(\"input\",{value:patientID,onChange:function onChange(e){return setIDNumber(e.target.value);}})}),/*#__PURE__*/_jsx(\"div\",{className:classes.autofillBtnContainer,children:/*#__PURE__*/_jsx(\"div\",{className:classes.autofillBtn,onClick:autofill,children:\"Autofill existing patient info\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.selectionField,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.selectionLabel,children:\"Patient Name:\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.selectionInputField,children:/*#__PURE__*/_jsx(\"input\",{value:patientName,onChange:function onChange(e){return setPatientName(e.target.value);}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.selectionField,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.selectionLabel,children:\"Date of Birth:\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.selectionInputField,children:/*#__PURE__*/_jsx(DateInput,{value:patientDOB,onChange:function onChange(e){return setPatientDOB(e.target.value);}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.selectionField,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.selectionLabel,children:\"Date Confirmed:\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.selectionInputField,children:/*#__PURE__*/_jsx(DateInput,{value:dateConfirmed,onChange:function onChange(e){return setDateConfirmed(e.target.value);}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.selectionField,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.selectionLabel,children:\"Local/Imported:\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.selectionInputField,children:/*#__PURE__*/_jsx(LocImpInput,{value:localImported,onChange:function onChange(e){return setLocalImported(e.target.value);}})})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.selectionTitle,children:\"Virus Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.selectionField,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.selectionLabel,children:\"Virus Name:\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.selectionInputField,children:/*#__PURE__*/_jsxs(\"select\",{className:\"category\",value:virusName,onChange:function onChange(e){return setVirusName(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,selected:true,hidden:true,children:\"Please Choose...\"}),props.virusList.length>0&&props.virusList.map(function(virus,i){return/*#__PURE__*/_jsx(\"option\",{value:virus.virus_name,children:virus.virus_name},i);})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.selectionField}),/*#__PURE__*/_jsx(\"div\",{className:classes.btnContainer,children:/*#__PURE__*/_jsx(\"div\",{className:classes.nextPage,onClick:nextPage,children:\"Next Page\"})})]});};export default AddPatientInfo;","map":{"version":3,"sources":["/Users/johnny/hotzone/frontend/src/components/Views/PatientInfo.js"],"names":["React","useEffect","useState","useMemo","createUseStyles","cn","useRootState","request","ClickAway","LineInput","DateInput","LocImpInput","SearchInput","SubmitButton","useTable","useInputFormStyle","root","width","display","flexDirection","justifyContent","paddingLeft","position","selectionTitle","fontSize","borderBottom","fontWeight","marginBottom","selectionField","selectionLabel","selectionInputField","marginLeft","marginTop","selectionInputIDField","nextPage","height","color","alignItems","cursor","borderRadius","right","border","input","background","outline","lineHeight","autofillBtn","backgroundColor","autofillBtnContainer","submitBtn","btnContainer","AddPatientInfo","props","classes","patient","patientName","setPatientName","patientID","setIDNumber","patientDOB","setPatientDOB","dateConfirmed","setDateConfirmed","localImported","setLocalImported","virusName","setVirusName","console","log","pinfo","alert","window","autofill","count","info","i","length","hkid","patient_name","birth_date","onPageChange","virusList","lengh","location","reload","e","target","value","map","virus","virus_name"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useMemo } from \"react\"\nimport { createUseStyles } from \"react-jss\"\nimport cn from \"classnames\"\nimport { useRootState } from \"@/App.js\"\nimport { request } from \"@/request.js\"\nimport ClickAway from \"@/components/Utils/ClickAway\"\nimport LineInput from \"@/components/Utils/LineInput.js\"\nimport DateInput from \"@/components/Utils/DateInput.js\"\nimport LocImpInput from \"@/components/Utils/LocalImportInput.js\"\nimport SearchInput from \"@/components/Utils/SearchInput.js\"\nimport SubmitButton from \"@/components/Utils/SubmitButton.js\"\n\nimport { useTable } from \"react-table\"\nimport \"../../table_virus.css\"\n\nconst useInputFormStyle = createUseStyles({\n  root: {\n    width: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"flex-start\",\n    paddingLeft: 30,\n    position: \"relative\",\n  },\n  selectionTitle: {\n    width: \"100%\",\n    fontSize: 40,\n    borderBottom: \"1px solid black\",\n    fontWeight: 500,\n    marginBottom: 10,\n  },\n  selectionField: {\n    display: \"flex\",\n  },\n  selectionLabel: {\n    fontSize: 20,\n  },\n  selectionInputField: {\n    width: \"400px\",\n    marginLeft: 20,\n    marginTop: 5,\n    marginBottom: 5,\n  },\n  selectionInputIDField:{\n    width: \"160px\",\n    marginLeft: 20,\n    marginTop: 5,\n    marginBottom: 5,\n  },\n  nextPage: {\n    marginTop: 20,\n    width: 120,\n    height: 40,\n    color: \"black\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    fontWeight: \"bold\",\n    cursor: \"pointer\",\n    fontSize: 15,\n    borderRadius: 5,\n    position: \"absolute\",\n    right: 15,\n    border: \"1px solid black\",\n  },\n  input: {\n    width: \"50%\",\n    background: \"grey\",\n    border: \"0px none\",\n    outline: \"none\",\n    \"& :focus\": {\n      outline: \"none\",\n    },\n    lineHeight: \"28px\",\n  },\n  autofillBtn:{\n    marginTop: 20,\n    height: 20,\n    color: \"black\",\n    backgroundColor: \"lightgrey\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    cursor: \"pointer\",\n    fontSize: 13,\n    border: \"1px solid black\",\n    borderRadius: 3,\n    marginLeft: 15,\n    marginTop: 5,\n    marginBottom: 5,\n  },\n  autofillBtnContainer:{\n\n  },\n  submitBtn: {\n    marginTop: 20,\n    width: \"10%\",\n    height: 40,\n    color: \"white\",\n    backgroundColor: \"black\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    fontWeight: \"bold\",\n    cursor: \"pointer\",\n    fontSize: 20,\n  },\n  btnContainer: {\n    position: \"relative\",\n  },\n})\n\nconst AddPatientInfo = (props) => {\n  const classes = useInputFormStyle()\n  const [patientName, setPatientName] = useState(\n    props.patient ? props.patient.patientName : \"\"\n  )\n  const [patientID, setIDNumber] = useState(\n    props.patient ? props.patient.patientID : \"\"\n  )\n  const [patientDOB, setPatientDOB] = useState(\n    props.patient ? props.patient.patientDOB : \"\"\n  )\n  const [dateConfirmed, setDateConfirmed] = useState(\n    props.patient ? props.patient.dateConfirmed : \"\"\n  )\n  const [localImported, setLocalImported] = useState(\n    props.patient ? props.patient.localImported : \"Local\"\n  )\n  const [virusName, setVirusName] = useState(\n    props.patient ? props.patient.virusName : \"\"\n  )\n\n  console.log(patientDOB,dateConfirmed)\n  // console.log(props.virusList)\n  const pinfo = async () => {\n    if (\n      patientName === \"\" ||\n      patientID === \"\" ||\n      patientDOB === \"\" ||\n      dateConfirmed === \"\" ||\n      localImported === \"\" ||\n      virusName === \"\"\n    ) {\n      alert(\"Missing some field\")\n      return\n    }\n    await request(\"addPatientinfo\", {\n      patientName: patientName,\n      patientID: patientID,\n      patientDOB: patientDOB,\n      dateConfirmed: dateConfirmed,\n      localImported: localImported,\n      virusName: virusName,\n    })\n    setPatientName(\"\")\n    setIDNumber(\"\")\n    setPatientDOB(\"\")\n    setDateConfirmed(\"\")\n    setLocalImported(\"\")\n    setVirusName(\"\")\n    window.alert(\"You have successfully input the patient and virus info.\")\n  }\n  const autofill= async () => {\n    if (patientID!==''){\n      var count=0\n      const info=await request(\"getPatientInfo\", [])\n      for (var i=0;i<info.length;i++){\n        if (info[i].hkid==patientID){\n          setPatientName(info[i].patient_name)\n          setPatientDOB(info[i].birth_date)\n          count=1\n        }\n      }\n      if (count==0){\n        alert(\"No matching record\")\n      }\n    }\n\n  }\n  const nextPage = () => {\n    if (\n      patientName === \"\" ||\n      patientID === \"\" ||\n      patientDOB === \"\" ||\n      dateConfirmed === \"\" ||\n      localImported === \"\" ||\n      virusName === \"\"\n    ) {\n      alert(\"Missing some field\")\n      return\n    }\n    const patient = {\n      patientName: patientName,\n      patientID: patientID,\n      patientDOB: patientDOB,\n      virusName: virusName,\n      dateConfirmed: dateConfirmed,\n      localImported: localImported,\n    }\n    props.onPageChange(1, patient, null)\n  }\n\n  useEffect(() => {\n    if (props.virusList.lengh <= 0) {\n      alert(\"Please add virus first\")\n      window.location.reload()\n    }\n  }, [])\n  return (\n    <div className={classes.root}>\n      <div className={classes.selectionTitle}>Patient Information</div>\n\n      <div className={classes.selectionField}>\n        <div className={classes.selectionLabel}>\n          Patient ID Document Number:\n        </div>\n        <div className={classes.selectionInputIDField}>\n          <input\n            value={patientID}\n            onChange={(e) => setIDNumber(e.target.value)}\n          />\n        </div>\n        <div className={classes.autofillBtnContainer}>\n        <div className={classes.autofillBtn} onClick={autofill}>\n          Autofill existing patient info\n        </div>\n        </div>\n      </div>\n      <div className={classes.selectionField}>\n        <div className={classes.selectionLabel}>Patient Name:</div>\n        <div className={classes.selectionInputField}>\n          <input\n            value={patientName}\n            onChange={(e) => setPatientName(e.target.value)}\n          />\n        </div>\n      </div>\n      <div className={classes.selectionField}>\n        <div className={classes.selectionLabel}>Date of Birth:</div>\n        <div className={classes.selectionInputField}>\n          <DateInput\n            value={patientDOB}\n            onChange={(e) => setPatientDOB(e.target.value)}\n          />\n        </div>\n      </div>\n      <div className={classes.selectionField}>\n        <div className={classes.selectionLabel}>Date Confirmed:</div>\n        <div className={classes.selectionInputField}>\n          <DateInput\n            value={dateConfirmed}\n            onChange={(e) => setDateConfirmed(e.target.value)}\n          />\n        </div>\n      </div>\n      <div className={classes.selectionField}>\n        <div className={classes.selectionLabel}>Local/Imported:</div>\n        <div className={classes.selectionInputField}>\n          <LocImpInput\n            value={localImported}\n            onChange={(e) => setLocalImported(e.target.value)}\n          />\n        </div>\n      </div>\n\n      <div className={classes.selectionTitle}>Virus Information</div>\n\n      <div className={classes.selectionField}>\n        <div className={classes.selectionLabel}>Virus Name:</div>\n        <div className={classes.selectionInputField}>\n          <select\n            className=\"category\"\n            value={virusName}\n            onChange={(e) => setVirusName(e.target.value)}\n          >\n            <option value=\"\" disabled selected hidden>\n              Please Choose...\n            </option>\n            {props.virusList.length > 0 &&\n              props.virusList.map((virus, i) => (\n                <option key={i} value={virus.virus_name}>\n                  {virus.virus_name}\n                </option>\n              ))}\n          </select>\n        </div>\n      </div>\n\n      <div className={classes.selectionField}></div>\n\n      <div className={classes.btnContainer}>\n        <div className={classes.nextPage} onClick={nextPage}>\n          Next Page\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default AddPatientInfo\n"]},"metadata":{},"sourceType":"module"}