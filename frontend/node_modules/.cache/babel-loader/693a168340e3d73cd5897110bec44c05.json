{"ast":null,"code":"import _regeneratorRuntime from\"/Users/johnny/hotzone/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/johnny/hotzone/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/Users/johnny/hotzone/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/johnny/hotzone/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import React,{useEffect,useState}from\"react\";import{createUseStyles}from\"react-jss\";import cn from\"classnames\";import{useRootState}from\"@/App.js\";import{request}from\"@/request.js\";import ClickAway from\"@/components/Utils/ClickAway\";import PatientInfo from\"./PatientInfo\";import LocationInfo from\"./LocationInfo\";import _ from\"lodash\";var AddNewRecord=function AddNewRecord(props){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),page=_useState2[0],setPage=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),patientInfo=_useState4[0],setPatientInfo=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),virusList=_useState6[0],setVirusList=_useState6[1];var blankrecord={category:\"Residence\",dateFrom:\"\",dateTo:\"\",location:null};var _useState7=useState([_objectSpread({},blankrecord)]),_useState8=_slicedToArray(_useState7,2),locationRecord=_useState8[0],setLocationRecord=_useState8[1];var submitForm=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(l){var filtered,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLocationRecord(l);filtered=_.filter(l,function(i){return i;});console.log(filtered);if(!(filtered.length>0)){_context.next=8;break;}_context.next=6;return request(\"submitCase\",{patient:patientInfo,location:l});case 6:result=_context.sent;if(result.status===\"Success\"){window.alert(\"You have successfully input the patient info.\");window.location.reload();}case 8:case\"end\":return _context.stop();}}},_callee);}));return function submitForm(_x){return _ref.apply(this,arguments);};}();var onPageChange=function onPageChange(pageNum,p,l){if(p){console.log(p);setPatientInfo(p);}if(l){setLocationRecord(l);}setPage(pageNum);};useEffect(function(){;_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return request(\"getAllVirus\",[]);case 2:result=_context2.sent;console.log(result);setVirusList(result);case 5:case\"end\":return _context2.stop();}}},_callee2);}))();},[]);return/*#__PURE__*/_jsx(_Fragment,{children:page===0?/*#__PURE__*/_jsx(PatientInfo,{onPageChange:onPageChange,patient:patientInfo,virusList:virusList}):/*#__PURE__*/_jsx(LocationInfo,{onPageChange:onPageChange,locationRecord:locationRecord,submitForm:submitForm})});};export default AddNewRecord;","map":{"version":3,"sources":["/Users/johnny/hotzone/frontend/src/components/Views/AddNewRecord.js"],"names":["React","useEffect","useState","createUseStyles","cn","useRootState","request","ClickAway","PatientInfo","LocationInfo","_","AddNewRecord","props","page","setPage","patientInfo","setPatientInfo","virusList","setVirusList","blankrecord","category","dateFrom","dateTo","location","locationRecord","setLocationRecord","submitForm","l","filtered","filter","i","console","log","length","patient","result","status","window","alert","reload","onPageChange","pageNum","p"],"mappings":"grBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,eAAT,KAAgC,WAAhC,CACA,MAAOC,CAAAA,EAAP,KAAe,YAAf,CACA,OAASC,YAAT,KAA6B,UAA7B,CACA,OAASC,OAAT,KAAwB,cAAxB,CACA,MAAOC,CAAAA,SAAP,KAAsB,8BAAtB,CACA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,CAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAAW,eACNV,QAAQ,CAAC,CAAD,CADF,wCACvBW,IADuB,eACjBC,OADiB,8BAEQZ,QAAQ,CAAC,IAAD,CAFhB,yCAEvBa,WAFuB,eAEVC,cAFU,8BAGId,QAAQ,CAAC,EAAD,CAHZ,yCAGvBe,SAHuB,eAGZC,YAHY,eAK9B,GAAMC,CAAAA,WAAW,CAAG,CAClBC,QAAQ,CAAE,WADQ,CAElBC,QAAQ,CAAE,EAFQ,CAGlBC,MAAM,CAAE,EAHU,CAIlBC,QAAQ,CAAE,IAJQ,CAApB,CAL8B,eAWcrB,QAAQ,CAAC,kBAAMiB,WAAN,EAAD,CAXtB,yCAWvBK,cAXuB,eAWPC,iBAXO,eAY9B,GAAMC,CAAAA,UAAU,0FAAG,iBAAMC,CAAN,sIACjBF,iBAAiB,CAACE,CAAD,CAAjB,CACMC,QAFW,CAEAlB,CAAC,CAACmB,MAAF,CAASF,CAAT,CAAY,SAACG,CAAD,QAAOA,CAAAA,CAAP,EAAZ,CAFA,CAGjBC,OAAO,CAACC,GAAR,CAAYJ,QAAZ,EAHiB,KAIbA,QAAQ,CAACK,MAAT,CAAgB,CAJH,gDAKM3B,CAAAA,OAAO,CAAC,YAAD,CAAe,CACzC4B,OAAO,CAAEnB,WADgC,CAEzCQ,QAAQ,CAAEI,CAF+B,CAAf,CALb,QAKTQ,MALS,eASf,GAAGA,MAAM,CAACC,MAAP,GAAkB,SAArB,CAA+B,CAC7BC,MAAM,CAACC,KAAP,CAAa,+CAAb,EACAD,MAAM,CAACd,QAAP,CAAgBgB,MAAhB,GACD,CAZc,sDAAH,kBAAVb,CAAAA,UAAU,4CAAhB,CAgBA,GAAMc,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,OAAD,CAAUC,CAAV,CAAaf,CAAb,CAAmB,CACtC,GAAIe,CAAJ,CAAO,CACLX,OAAO,CAACC,GAAR,CAAYU,CAAZ,EACA1B,cAAc,CAAC0B,CAAD,CAAd,CACD,CACD,GAAIf,CAAJ,CAAO,CACLF,iBAAiB,CAACE,CAAD,CAAjB,CACD,CACDb,OAAO,CAAC2B,OAAD,CAAP,CACD,CATD,CAWAxC,SAAS,CAAC,UAAM,CACd,CAAC,wDAAC,0KACqBK,CAAAA,OAAO,CAAC,aAAD,CAAgB,EAAhB,CAD5B,QACM6B,MADN,gBAEAJ,OAAO,CAACC,GAAR,CAAYG,MAAZ,EACAjB,YAAY,CAACiB,MAAD,CAAZ,CAHA,wDAAD,KAKF,CANQ,CAMN,EANM,CAAT,CAOA,mBACE,yBACGtB,IAAI,GAAK,CAAT,cACC,KAAC,WAAD,EAAa,YAAY,CAAE2B,YAA3B,CAAyC,OAAO,CAAEzB,WAAlD,CAA+D,SAAS,CAAEE,SAA1E,EADD,cAGC,KAAC,YAAD,EACE,YAAY,CAAEuB,YADhB,CAEE,cAAc,CAAEhB,cAFlB,CAGE,UAAU,CAAEE,UAHd,EAJJ,EADF,CAaD,CA3DD,CA6DA,cAAef,CAAAA,YAAf","sourcesContent":["import React, { useEffect, useState } from \"react\"\nimport { createUseStyles } from \"react-jss\"\nimport cn from \"classnames\"\nimport { useRootState } from \"@/App.js\"\nimport { request } from \"@/request.js\"\nimport ClickAway from \"@/components/Utils/ClickAway\"\nimport PatientInfo from \"./PatientInfo\"\nimport LocationInfo from \"./LocationInfo\"\nimport _ from \"lodash\"\n\nconst AddNewRecord = (props) => {\n  const [page, setPage] = useState(0)\n  const [patientInfo, setPatientInfo] = useState(null)\n  const [virusList, setVirusList] = useState([])\n\n  const blankrecord = {\n    category: \"Residence\",\n    dateFrom: \"\",\n    dateTo: \"\",\n    location: null,\n  }\n  const [locationRecord, setLocationRecord] = useState([{ ...blankrecord }])\n  const submitForm = async(l) => {\n    setLocationRecord(l)\n    const filtered = _.filter(l, (i) => i)\n    console.log(filtered)\n    if (filtered.length>0){\n      const result = await request(\"submitCase\", {\n        patient: patientInfo,\n        location: l,\n      })\n      if(result.status === \"Success\"){\n        window.alert(\"You have successfully input the patient info.\")\n        window.location.reload()\n      }\n      \n    }\n  }\n  const onPageChange = (pageNum, p, l) => {\n    if (p) {\n      console.log(p)\n      setPatientInfo(p)\n    }\n    if (l) {\n      setLocationRecord(l)\n    }\n    setPage(pageNum)\n  }\n\n  useEffect(() => {\n    ;(async () => {\n      const result = await request(\"getAllVirus\", [])\n      console.log(result)\n      setVirusList(result)\n    })()\n  }, [])\n  return (\n    <>\n      {page === 0 ? (\n        <PatientInfo onPageChange={onPageChange} patient={patientInfo} virusList={virusList}/>\n      ) : (\n        <LocationInfo\n          onPageChange={onPageChange}\n          locationRecord={locationRecord}\n          submitForm={submitForm}\n        />\n      )}\n    </>\n  )\n}\n\nexport default AddNewRecord\n"]},"metadata":{},"sourceType":"module"}