{"ast":null,"code":"import _objectSpread from\"/Users/johnny/hotzone/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/johnny/hotzone/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/johnny/hotzone/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/johnny/hotzone/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import React,{useEffect,useState,useMemo}from\"react\";import{createUseStyles}from\"react-jss\";import cn from\"classnames\";import{useRootState}from\"@/App.js\";import{request}from\"@/request.js\";import ClickAway from\"@/components/Utils/ClickAway\";import{useCookies}from\"react-cookie\";import{useTable}from\"react-table\";var settingStyle=createUseStyles({root:{width:\"100%\",display:\"flex\",flexDirection:\"column\",justifyContent:\"flex-start\",paddingLeft:30,position:\"relative\"},bigTitle:{width:\"100%\",fontSize:40,borderBottom:\"1px solid black\",fontWeight:500,marginBottom:10},selectionField:{display:\"flex\"},selectionLabel:{fontSize:20},submitBtn:{marginTop:20,width:\"10%\",height:40,color:\"white\",backgroundColor:\"black\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",fontWeight:\"bold\",cursor:\"pointer\",fontSize:20}});var mainStyle=createUseStyles({root:{display:\"flex\",flexDirection:\"column\",position:\"relative\",padding:\"30px 20px 20px 20px\"},setting:{width:\"10%\",height:40,color:\"white\",backgroundColor:\"grey\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",fontWeight:\"bold\",fontSize:20,cursor:\"pointer\",position:\"absolute\",right:20,top:\"0px\"},bigTitle:{width:\"100%\",fontSize:40,borderBottom:\"1px solid black\",fontWeight:500,marginBottom:10},top:{display:\"flex\",justifyContent:\"space-between\"},option:{width:300}});var Clustering=function Clustering(props){// const classes = clusteringStyle()\nvar _useCookies=useCookies([\"cookie-name\"]),_useCookies2=_slicedToArray(_useCookies,2),cookies=_useCookies2[0],setCookie=_useCookies2[1];console.log(cookies);var _useState=useState(\"data\"),_useState2=_slicedToArray(_useState,2),currentDisplay=_useState2[0],setCurrentDispaly=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),clusters=_useState4[0],setClusters=_useState4[1];var _useState5=useState(cookies.D||200),_useState6=_slicedToArray(_useState5,2),Dvalue=_useState6[0],setDvalue=_useState6[1];var _useState7=useState(cookies.T||3),_useState8=_slicedToArray(_useState7,2),Tvalue=_useState8[0],setTvalue=_useState8[1];var _useState9=useState(cookies.C||2),_useState10=_slicedToArray(_useState9,2),Cvalue=_useState10[0],setCvalue=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),data=_useState12[0],setData=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),clusterNo=_useState14[0],setClusterNo=_useState14[1];var classes=mainStyle();var onSettingSaved=function onSettingSaved(d,t,c){setDvalue(d);setTvalue(t);setCvalue(c);setCookie(\"D\",d);setCookie(\"T\",t);setCookie(\"C\",c);alert(\"Setting saved\");setCurrentDispaly(\"data\");};useEffect(function(){;_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return request(\"findCluster\",{Dvalue:Dvalue,Tvalue:Tvalue,Cvalue:Cvalue});case 2:result=_context.sent;if(result){setClusters(result.clusters);setData(result.clusters[0]);}console.log(result);case 5:case\"end\":return _context.stop();}}},_callee);}))();},[Dvalue,Tvalue,Cvalue]);var COLUMNS=[{Header:\"Location Name\",accessor:\"locationName\"},{Header:\"X\",accessor:\"x\"},{Header:\"Y\",accessor:\"y\"},{Header:\"Date of visit\",accessor:\"date\"},{Header:\"Case Number\",accessor:\"caseNo\"}];var columns=useMemo(function(){return COLUMNS;},[]);var tableInstance=useTable({columns:columns,data:data});var getTableProps=tableInstance.getTableProps,getTableBodyProps=tableInstance.getTableBodyProps,headerGroups=tableInstance.headerGroups,rows=tableInstance.rows,prepareRow=tableInstance.prepareRow;return/*#__PURE__*/_jsxs(_Fragment,{children:[currentDisplay===\"data\"&&/*#__PURE__*/_jsxs(\"div\",{className:classes.root,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.setting,onClick:function onClick(){return setCurrentDispaly(\"setting\");},children:[\" \",\"Setting\"]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.top,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.bigTitle,children:\"Clusters\"}),/*#__PURE__*/_jsx(\"select\",{selected:clusterNo,children:clusters.length>0&&clusters.map(function(c,i){return/*#__PURE__*/_jsx(\"option\",{value:i,children:i});})})]}),clusters.length>0&&data.length>0&&/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:headerGroups.map(function(headerGroup){return/*#__PURE__*/_jsx(\"tr\",_objectSpread(_objectSpread({},headerGroup.getHeaderGroupProps()),{},{children:headerGroup.headers.map(function(column){return/*#__PURE__*/_jsx(\"th\",_objectSpread(_objectSpread({},column.getHeaderProps()),{},{children:column.render(\"Header\")}));})}));})}),/*#__PURE__*/_jsx(\"tbody\",_objectSpread(_objectSpread({},getTableBodyProps()),{},{children:rows.map(function(row){prepareRow(row);return/*#__PURE__*/_jsx(\"tr\",_objectSpread(_objectSpread({},row.getRowProps()),{},{className:classes.row,children:row.cells.map(function(cell){return/*#__PURE__*/_jsx(\"td\",_objectSpread(_objectSpread({},cell.getCellProps()),{},{children:cell.render(\"Cell\")}));})}));})}))]})]}),currentDisplay===\"setting\"&&/*#__PURE__*/_jsx(Setting,{onSettingSaved:onSettingSaved})]});};var Setting=function Setting(props){var classes=settingStyle();var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),Dvalue=_useState16[0],setDvalue=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),Tvalue=_useState18[0],setTvalue=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),Cvalue=_useState20[0],setCvalue=_useState20[1];var clustering_func=function clustering_func(){if(!Dvalue||!Tvalue||!Cvalue){alert(\"Missing some fields\");}else if(isNaN(Dvalue)||isNaN(Tvalue)||isNaN(Cvalue)){alert(\"All the fields should be a number.\");}else{props.onSettingSaved(Dvalue,Tvalue,Cvalue);}};return/*#__PURE__*/_jsxs(\"div\",{className:classes.root,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.bigTitle,children:\"Setting\"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.selectionField,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.selectionLabel,children:\"D value(in meter): \"}),/*#__PURE__*/_jsx(\"input\",{value:Dvalue,onChange:function onChange(e){return setDvalue(e.target.value);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:classes.selectionField,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.selectionLabel,children:\"T value(in day): \"}),/*#__PURE__*/_jsx(\"input\",{value:Tvalue,onChange:function onChange(e){return setTvalue(e.target.value);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:classes.selectionField,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.selectionLabel,children:\"C value(cluster size):\"}),/*#__PURE__*/_jsx(\"input\",{value:Cvalue,onChange:function onChange(e){return setCvalue(e.target.value);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:classes.submitBtn,onClick:clustering_func,children:\"Save\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]});};export default Clustering;","map":{"version":3,"sources":["/Users/johnny/hotzone/frontend/src/components/Views/Clustering.js"],"names":["React","useEffect","useState","useMemo","createUseStyles","cn","useRootState","request","ClickAway","useCookies","useTable","settingStyle","root","width","display","flexDirection","justifyContent","paddingLeft","position","bigTitle","fontSize","borderBottom","fontWeight","marginBottom","selectionField","selectionLabel","submitBtn","marginTop","height","color","backgroundColor","alignItems","cursor","mainStyle","padding","setting","right","top","option","Clustering","props","cookies","setCookie","console","log","currentDisplay","setCurrentDispaly","clusters","setClusters","D","Dvalue","setDvalue","T","Tvalue","setTvalue","C","Cvalue","setCvalue","data","setData","clusterNo","setClusterNo","classes","onSettingSaved","d","t","c","alert","result","COLUMNS","Header","accessor","columns","tableInstance","getTableProps","getTableBodyProps","headerGroups","rows","prepareRow","length","map","i","headerGroup","getHeaderGroupProps","headers","column","getHeaderProps","render","row","getRowProps","cells","cell","getCellProps","Setting","clustering_func","isNaN","e","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useMemo } from \"react\"\nimport { createUseStyles } from \"react-jss\"\nimport cn from \"classnames\"\nimport { useRootState } from \"@/App.js\"\nimport { request } from \"@/request.js\"\nimport ClickAway from \"@/components/Utils/ClickAway\"\nimport { useCookies } from \"react-cookie\"\nimport { useTable } from \"react-table\"\n\nconst settingStyle = createUseStyles({\n  root: {\n    width: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"flex-start\",\n    paddingLeft: 30,\n    position: \"relative\",\n  },\n  bigTitle: {\n    width: \"100%\",\n    fontSize: 40,\n    borderBottom: \"1px solid black\",\n    fontWeight: 500,\n    marginBottom: 10,\n  },\n  selectionField: {\n    display: \"flex\",\n  },\n  selectionLabel: {\n    fontSize: 20,\n  },\n  submitBtn: {\n    marginTop: 20,\n    width: \"10%\",\n    height: 40,\n    color: \"white\",\n    backgroundColor: \"black\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    fontWeight: \"bold\",\n    cursor: \"pointer\",\n    fontSize: 20,\n  },\n})\n\nconst mainStyle = createUseStyles({\n  root: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    position: \"relative\",\n    padding: \"30px 20px 20px 20px\",\n  },\n  setting: {\n    width: \"10%\",\n    height: 40,\n    color: \"white\",\n    backgroundColor: \"grey\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    fontWeight: \"bold\",\n    fontSize: 20,\n    cursor: \"pointer\",\n    position: \"absolute\",\n    right: 20,\n    top: \"0px\",\n  },\n  bigTitle: {\n    width: \"100%\",\n    fontSize: 40,\n    borderBottom: \"1px solid black\",\n    fontWeight: 500,\n    marginBottom: 10,\n  },\n  top: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n  },\n  option: {\n    width: 300,\n  },\n})\n\nconst Clustering = (props) => {\n  // const classes = clusteringStyle()\n  const [cookies, setCookie] = useCookies([\"cookie-name\"])\n  console.log(cookies)\n  const [currentDisplay, setCurrentDispaly] = useState(\"data\")\n  const [clusters, setClusters] = useState([])\n  const [Dvalue, setDvalue] = useState(cookies.D || 200)\n  const [Tvalue, setTvalue] = useState(cookies.T || 3)\n  const [Cvalue, setCvalue] = useState(cookies.C || 2)\n  const [data, setData] = useState([])\n  const [clusterNo, setClusterNo] = useState(0)\n  const classes = mainStyle()\n  const onSettingSaved = (d, t, c) => {\n    setDvalue(d)\n    setTvalue(t)\n    setCvalue(c)\n    setCookie(\"D\", d)\n    setCookie(\"T\", t)\n    setCookie(\"C\", c)\n    alert(\"Setting saved\")\n    setCurrentDispaly(\"data\")\n  }\n\n  useEffect(() => {\n    ;(async () => {\n      const result = await request(\"findCluster\", {\n        Dvalue: Dvalue,\n        Tvalue: Tvalue,\n        Cvalue: Cvalue,\n      })\n      if (result) {\n        setClusters(result.clusters)\n        setData(result.clusters[0])\n      }\n      console.log(result)\n    })()\n  }, [Dvalue, Tvalue, Cvalue])\n\n  const COLUMNS = [\n    {\n      Header: \"Location Name\",\n      accessor: \"locationName\",\n    },\n    {\n      Header: \"X\",\n      accessor: \"x\",\n    },\n    {\n      Header: \"Y\",\n      accessor: \"y\",\n    },\n    {\n      Header: \"Date of visit\",\n      accessor: \"date\",\n    },\n    {\n      Header: \"Case Number\",\n      accessor: \"caseNo\",\n    },\n  ]\n  const columns = useMemo(() => COLUMNS, [])\n  const tableInstance = useTable({\n    columns,\n    data,\n  })\n  const {\n    getTableProps,\n    getTableBodyProps,\n    headerGroups,\n    rows,\n    prepareRow,\n  } = tableInstance\n\n  return (\n    <>\n      {currentDisplay === \"data\" && (\n        <div className={classes.root}>\n          <div\n            className={classes.setting}\n            onClick={() => setCurrentDispaly(\"setting\")}\n          >\n            {\" \"}\n            Setting\n          </div>\n          <div className={classes.top}>\n            <div className={classes.bigTitle}>Clusters</div>\n            <select selected={clusterNo}>\n              {clusters.length > 0 &&\n                clusters.map((c, i) => <option value={i}>{i}</option>)}\n            </select>\n          </div>\n\n          {clusters.length > 0 && data.length > 0 && (\n            <table>\n              <thead>\n                {headerGroups.map((headerGroup) => (\n                  <tr {...headerGroup.getHeaderGroupProps()}>\n                    {headerGroup.headers.map((column) => (\n                      <th {...column.getHeaderProps()}>\n                        {column.render(\"Header\")}\n                      </th>\n                    ))}\n                  </tr>\n                ))}\n              </thead>\n              <tbody {...getTableBodyProps()}>\n                {rows.map((row) => {\n                  prepareRow(row)\n                  return (\n                    <tr {...row.getRowProps()} className={classes.row}>\n                      {row.cells.map((cell) => {\n                        return (\n                          <td {...cell.getCellProps()}>\n                            {cell.render(\"Cell\")}\n                          </td>\n                        )\n                      })}\n                    </tr>\n                  )\n                })}\n              </tbody>\n            </table>\n          )}\n        </div>\n      )}\n      {currentDisplay === \"setting\" && (\n        <Setting onSettingSaved={onSettingSaved} />\n      )}\n    </>\n  )\n}\n\nconst Setting = (props) => {\n  const classes = settingStyle()\n  const [Dvalue, setDvalue] = useState(\"\")\n  const [Tvalue, setTvalue] = useState(\"\")\n  const [Cvalue, setCvalue] = useState(\"\")\n\n  const clustering_func = () => {\n    if (!Dvalue || !Tvalue || !Cvalue) {\n      alert(\"Missing some fields\")\n    } else if (isNaN(Dvalue) || isNaN(Tvalue) || isNaN(Cvalue)) {\n      alert(\"All the fields should be a number.\")\n    } else {\n      props.onSettingSaved(Dvalue, Tvalue, Cvalue)\n    }\n  }\n  return (\n    <div className={classes.root}>\n      <div className={classes.bigTitle}>Setting</div>\n      <div className={classes.selectionField}>\n        <div className={classes.selectionLabel}>D value(in meter): </div>\n        <input value={Dvalue} onChange={(e) => setDvalue(e.target.value)} />\n      </div>\n      <br />\n      <div className={classes.selectionField}>\n        <div className={classes.selectionLabel}>T value(in day): </div>\n        <input value={Tvalue} onChange={(e) => setTvalue(e.target.value)} />\n      </div>\n      <br />\n      <div className={classes.selectionField}>\n        <div className={classes.selectionLabel}>C value(cluster size):</div>\n        <input value={Cvalue} onChange={(e) => setCvalue(e.target.value)} />\n      </div>\n      <br />\n      <div className={classes.submitBtn} onClick={clustering_func}>\n        Save\n      </div>\n\n      <br />\n      <br />\n      <br />\n    </div>\n  )\n}\nexport default Clustering\n"]},"metadata":{},"sourceType":"module"}