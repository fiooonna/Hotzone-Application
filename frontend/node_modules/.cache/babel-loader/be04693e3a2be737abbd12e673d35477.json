{"ast":null,"code":"import _slicedToArray from\"/Users/johnny/hotzone/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/Users/johnny/hotzone/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{createUseStyles}from\"react-jss\";import HomePage from\"@/components/Views/HomePage\";import Login from\"@/components/Views/Login\";import React,{useEffect,useState,useReducer,createContext,useContext}from\"react\";import{useCookies}from\"react-cookie\";import _ from\"lodash\";var RootStateContext=/*#__PURE__*/createContext({});var reducer=function reducer(state,action){if(action.type===\"SET_USER\"){var update=_.pick(action,[\"username\",\"name\"]);return _objectSpread(_objectSpread({},state),update);}else{return state;}};var initialState={username:\"\",name:\"\"};function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),logined=_useState2[0],setLogined=_useState2[1];var _useCookies=useCookies([\"cookie-name\"]),_useCookies2=_slicedToArray(_useCookies,3),cookies=_useCookies2[0],setCookie=_useCookies2[1],removeCookie=_useCookies2[2];var _useReducer=useReducer(reducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var _onLoginSuccess=function onLoginSuccess(token){setLogined(true);setCookie(\"token\",token);};useEffect(function(){if(cookies.token){setLogined(true);}},[]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(RootStateContext.Provider,{value:[state,dispatch],children:/*#__PURE__*/_jsx(\"div\",{children:logined?/*#__PURE__*/_jsx(HomePage,{}):/*#__PURE__*/_jsx(Login,{onLoginSuccess:function onLoginSuccess(token){return _onLoginSuccess(token);}})})})});}export var useRootState=function useRootState(){var obj=useContext(RootStateContext);return obj;};export default App;","map":{"version":3,"sources":["/Users/johnny/hotzone/frontend/src/App.js"],"names":["createUseStyles","HomePage","Login","React","useEffect","useState","useReducer","createContext","useContext","useCookies","_","RootStateContext","reducer","state","action","type","update","pick","initialState","username","name","App","logined","setLogined","cookies","setCookie","removeCookie","dispatch","onLoginSuccess","token","useRootState","obj"],"mappings":"yYAAA,OAASA,eAAT,KAAgC,WAAhC,CACA,MAAOC,CAAAA,QAAP,KAAqB,6BAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,0BAAlB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,CAAqCC,UAArC,CAAiDC,aAAjD,CAAgEC,UAAhE,KAAkF,OAAlF,CACA,OAASC,UAAT,KAA2B,cAA3B,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,CAEA,GAAMC,CAAAA,gBAAgB,cAAGJ,aAAa,CAAC,EAAD,CAAtC,CAEA,GAAMK,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACC,KAAD,CAAQC,MAAR,CAAmB,CACjC,GAAIA,MAAM,CAACC,IAAP,GAAgB,UAApB,CAAgC,CAC9B,GAAMC,CAAAA,MAAM,CAAGN,CAAC,CAACO,IAAF,CAAOH,MAAP,CAAe,CAAC,UAAD,CAAa,MAAb,CAAf,CAAf,CACA,sCAAYD,KAAZ,EAAsBG,MAAtB,EACD,CAHD,IAGO,CACL,MAAOH,CAAAA,KAAP,CACD,CACF,CAPD,CASA,GAAMK,CAAAA,YAAY,CAAG,CAAEC,QAAQ,CAAC,EAAX,CAAeC,IAAI,CAAE,EAArB,CAArB,CAEA,QAASC,CAAAA,GAAT,EAAe,eACiBhB,QAAQ,CAAC,KAAD,CADzB,wCACNiB,OADM,eACGC,UADH,+BAE8Bd,UAAU,CAAC,CAAC,aAAD,CAAD,CAFxC,4CAENe,OAFM,iBAEGC,SAFH,iBAEcC,YAFd,iCAGapB,UAAU,CAACM,OAAD,CAAUM,YAAV,CAHvB,4CAGNL,KAHM,iBAGCc,QAHD,iBAKb,GAAMC,CAAAA,eAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,KAAD,CAAW,CAChCN,UAAU,CAAC,IAAD,CAAV,CACAE,SAAS,CAAC,OAAD,CAAUI,KAAV,CAAT,CACD,CAHD,CAKAzB,SAAS,CAAC,UAAM,CACd,GAAIoB,OAAO,CAACK,KAAZ,CAAmB,CACjBN,UAAU,CAAC,IAAD,CAAV,CACD,CACF,CAJQ,CAIN,EAJM,CAAT,CAMA,mBACE,sCACE,KAAC,gBAAD,CAAkB,QAAlB,EAA2B,KAAK,CAAE,CAACV,KAAD,CAAQc,QAAR,CAAlC,uBACE,qBACGL,OAAO,cACN,KAAC,QAAD,IADM,cAGN,KAAC,KAAD,EAAO,cAAc,CAAE,wBAACO,KAAD,QAAWD,CAAAA,eAAc,CAACC,KAAD,CAAzB,EAAvB,EAJJ,EADF,EADF,EADF,CAaD,CACD,MAAO,IAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CAChC,GAAMC,CAAAA,GAAG,CAAGvB,UAAU,CAACG,gBAAD,CAAtB,CACA,MAAOoB,CAAAA,GAAP,CACD,CAHM,CAIP,cAAeV,CAAAA,GAAf","sourcesContent":["import { createUseStyles } from \"react-jss\"\nimport HomePage from \"@/components/Views/HomePage\"\nimport Login from \"@/components/Views/Login\"\nimport React, { useEffect, useState, useReducer, createContext, useContext } from \"react\"\nimport { useCookies } from \"react-cookie\"\nimport _ from \"lodash\"\n\nconst RootStateContext = createContext({})\n\nconst reducer = (state, action) => {\n  if (action.type === \"SET_USER\") {\n    const update = _.pick(action, [\"username\", \"name\"])\n    return { ...state, ...update }\n  } else {\n    return state\n  }\n}\n\nconst initialState = { username:\"\", name: \"\"}\n\nfunction App() {\n  const [logined, setLogined] = useState(false)\n  const [cookies, setCookie, removeCookie] = useCookies([\"cookie-name\"])\n  const [state, dispatch] = useReducer(reducer, initialState)\n\n  const onLoginSuccess = (token) => {\n    setLogined(true)\n    setCookie(\"token\", token)\n  }\n\n  useEffect(() => {\n    if (cookies.token) {\n      setLogined(true)\n    }\n  }, [])\n\n  return (\n    <>\n      <RootStateContext.Provider value={[state, dispatch]} >\n        <div>\n          {logined ? (\n            <HomePage />\n          ) : (\n            <Login onLoginSuccess={(token) => onLoginSuccess(token)} />\n          )}\n        </div>\n      </RootStateContext.Provider>\n    </>\n  )\n}\nexport const useRootState = () => {\n  const obj = useContext(RootStateContext)\n  return obj\n}\nexport default App\n"]},"metadata":{},"sourceType":"module"}