{"ast":null,"code":"import _regeneratorRuntime from\"/Users/johnny/hotzone/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/johnny/hotzone/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/Users/johnny/hotzone/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/johnny/hotzone/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useEffect,useState,useMemo}from\"react\";import{createUseStyles}from\"react-jss\";import cn from\"classnames\";import{useRootState}from\"@/App.js\";import{request}from\"@/request.js\";import ClickAway from\"@/components/Utils/ClickAway\";import{useTable}from\"react-table\";import\"../../table.css\";import MOCK_DATA from\"../../MOCK_DATA.json\";var tableStyle=createUseStyles({root:{width:\"100%\",display:\"flex\",flexDirection:\"column\",justifyContent:\"flex-start\",paddingLeft:30,position:\"relative\"},bigTitle:{width:\"100%\",fontSize:40,borderBottom:\"1px solid black\",fontWeight:500,marginBottom:10},// selectionField: {\n//   display: \"flex\",\n// },\n// selectionLabel: {\n//   fontSize: 20,\n// },\n// nextPage: {\n//   cursor: \"pointer\",\n//   textDecoration: \" underline\",\n//   position: \"absolute\",\n//   bottom: 0,\n//   right: 20,\n// },\nrow:{cursor:\"pointer\"}});var useCaseDetailStyle=createUseStyles({root:{position:\"relative\",display:\"flex\",flexDirection:\"column\"},backBtn:{position:\"absoulte\",top:10,left:0,height:30,width:60,borderRadius:6,border:\"1px solid black\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",cursor:\"pointer\",marginBottom:20},row:{marginBottom:20}});var CaseDetail=function CaseDetail(props){var classes=useCaseDetailStyle();var info=props.case;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var COLUMNS=[{Header:\"Date From\",accessor:\"date_from\"},{Header:\"Date To\",accessor:\"date_to\"},{Header:\"Name of Location\",accessor:\"location_name\"},{Header:\"Address\",accessor:\"address\"},{Header:\"X-coordiate\",accessor:\"XCoord\"},{Header:\"Y-coordiate\",accessor:\"YCoord\"}];var columns=useMemo(function(){return COLUMNS;},[]);useEffect(function(){for(var i=0;i<info.locations.length;i++){var entry=_objectSpread(_objectSpread({},info.locations[i]),info.visited[i]);setData(data.push(entry));}},[]);console.log(data);var tableInstance=useTable({columns:columns,data:data});var getTableProps=tableInstance.getTableProps,getTableBodyProps=tableInstance.getTableBodyProps,headerGroups=tableInstance.headerGroups,rows=tableInstance.rows,prepareRow=tableInstance.prepareRow;return/*#__PURE__*/_jsxs(\"div\",{className:classes.root,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.backBtn,onClick:props.onBack,children:\"Back\"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.row,children:[\"Case ID: \",info.case.case_no]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.row,children:[\"Patient Name: \",info.patient.patient_name]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.row,children:[\"Confirmed Date: \",info.case.date_confirmed]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.row,children:[\"ID number: \",info.patient.hkid]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.row,children:[\"Local/Imported: \",info.case.local_or_imported]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.row,children:[\"Virus Name: \",info.virus.common_name]}),/*#__PURE__*/_jsx(\"div\",{className:classes.row,children:\"Location visited:\"}),info.locations.length>0&&/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:headerGroups.map(function(headerGroup){return/*#__PURE__*/_jsx(\"tr\",_objectSpread(_objectSpread({},headerGroup.getHeaderGroupProps()),{},{children:headerGroup.headers.map(function(column){return/*#__PURE__*/_jsx(\"th\",_objectSpread(_objectSpread({},column.getHeaderProps()),{},{children:column.render(\"Header\")}));})}));})}),/*#__PURE__*/_jsx(\"tbody\",_objectSpread(_objectSpread({},getTableBodyProps()),{},{children:rows.map(function(row){prepareRow(row);return/*#__PURE__*/_jsx(\"tr\",_objectSpread(_objectSpread({},row.getRowProps()),{},{children:row.cells.map(function(cell){return/*#__PURE__*/_jsx(\"td\",_objectSpread(_objectSpread({},cell.getCellProps()),{},{children:cell.render(\"Cell\")}));})}));})}))]})]});};var ViewRecord=function ViewRecord(props){var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),selectCase=_useState6[0],setSelectedCase=_useState6[1];var classes=tableStyle();var COLUMNS=[{Header:\"CaseId\",accessor:\"case_no\"},// {\n//   Header:'Patient Name',\n//   accessor:'patient_name'\n// },\n{Header:\"Patient ID\",accessor:\"patient\"},// {\n//   Header:'Virus Name',\n//   accessor:'virus_name'\n// },\n{Header:\"virus ID\",accessor:\"virus\"},{Header:\"Date Confirmed\",accessor:\"date_confirmed\"}];var columns=useMemo(function(){return COLUMNS;},[]);//const data = useMemo(() => MOCK_DATA,[])//not done\nuseEffect(function(){;_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return request(\"getAllCase\",[]);case 2:result=_context.sent;setData(result);case 4:case\"end\":return _context.stop();}}},_callee);}))();},[]);// console.log(JSON.stringify(request('viewDetail')))\nvar tableInstance=useTable({columns:columns,data:data});var getTableProps=tableInstance.getTableProps,getTableBodyProps=tableInstance.getTableBodyProps,headerGroups=tableInstance.headerGroups,rows=tableInstance.rows,prepareRow=tableInstance.prepareRow;console.log(rows);var showDetails=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(row){var result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return request(\"getCaseById\",{id:row.values.case_no});case 2:result=_context2.sent;setSelectedCase(result);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function showDetails(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:classes.root,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:classes.bigTitle,children:\"View Record\"})}),data.length>0&&!selectCase&&/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:headerGroups.map(function(headerGroup){return/*#__PURE__*/_jsx(\"tr\",_objectSpread(_objectSpread({},headerGroup.getHeaderGroupProps()),{},{children:headerGroup.headers.map(function(column){return/*#__PURE__*/_jsx(\"th\",_objectSpread(_objectSpread({},column.getHeaderProps()),{},{children:column.render(\"Header\")}));})}));})}),/*#__PURE__*/_jsx(\"tbody\",_objectSpread(_objectSpread({},getTableBodyProps()),{},{children:rows.map(function(row){prepareRow(row);return/*#__PURE__*/_jsx(\"tr\",_objectSpread(_objectSpread({},row.getRowProps()),{},{onClick:function onClick(){showDetails(row);},className:classes.row,children:row.cells.map(function(cell){return/*#__PURE__*/_jsx(\"td\",_objectSpread(_objectSpread({},cell.getCellProps()),{},{children:cell.render(\"Cell\")}));})}));})}))]}),selectCase&&/*#__PURE__*/_jsx(CaseDetail,{case:selectCase,onBack:function onBack(){return setSelectedCase(null);}})]});};export default ViewRecord;","map":{"version":3,"sources":["/Users/johnny/hotzone/frontend/src/components/Views/ViewRecord.js"],"names":["React","useEffect","useState","useMemo","createUseStyles","cn","useRootState","request","ClickAway","useTable","MOCK_DATA","tableStyle","root","width","display","flexDirection","justifyContent","paddingLeft","position","bigTitle","fontSize","borderBottom","fontWeight","marginBottom","row","cursor","useCaseDetailStyle","backBtn","top","left","height","borderRadius","border","alignItems","CaseDetail","props","classes","info","case","data","setData","COLUMNS","Header","accessor","columns","i","locations","length","entry","visited","push","console","log","tableInstance","getTableProps","getTableBodyProps","headerGroups","rows","prepareRow","onBack","case_no","patient","patient_name","date_confirmed","hkid","local_or_imported","virus","common_name","map","headerGroup","getHeaderGroupProps","headers","column","getHeaderProps","render","getRowProps","cells","cell","getCellProps","ViewRecord","selectCase","setSelectedCase","result","showDetails","id","values"],"mappings":"wqBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,CAAqCC,OAArC,KAAoD,OAApD,CACA,OAASC,eAAT,KAAgC,WAAhC,CACA,MAAOC,CAAAA,EAAP,KAAe,YAAf,CACA,OAASC,YAAT,KAA6B,UAA7B,CACA,OAASC,OAAT,KAAwB,cAAxB,CACA,MAAOC,CAAAA,SAAP,KAAsB,8BAAtB,CAEA,OAASC,QAAT,KAAyB,aAAzB,CACA,MAAO,iBAAP,CACA,MAAOC,CAAAA,SAAP,KAAsB,sBAAtB,CAEA,GAAMC,CAAAA,UAAU,CAAGP,eAAe,CAAC,CACjCQ,IAAI,CAAE,CACJC,KAAK,CAAE,MADH,CAEJC,OAAO,CAAE,MAFL,CAGJC,aAAa,CAAE,QAHX,CAIJC,cAAc,CAAE,YAJZ,CAKJC,WAAW,CAAE,EALT,CAMJC,QAAQ,CAAE,UANN,CAD2B,CASjCC,QAAQ,CAAE,CACRN,KAAK,CAAE,MADC,CAERO,QAAQ,CAAE,EAFF,CAGRC,YAAY,CAAE,iBAHN,CAIRC,UAAU,CAAE,GAJJ,CAKRC,YAAY,CAAE,EALN,CATuB,CAgBjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,GAAG,CAAE,CACHC,MAAM,CAAE,SADL,CA7B4B,CAAD,CAAlC,CAkCA,GAAMC,CAAAA,kBAAkB,CAAGtB,eAAe,CAAC,CACzCQ,IAAI,CAAE,CACJM,QAAQ,CAAE,UADN,CAEJJ,OAAO,CAAE,MAFL,CAGJC,aAAa,CAAE,QAHX,CADmC,CAMzCY,OAAO,CAAE,CACPT,QAAQ,CAAE,UADH,CAEPU,GAAG,CAAE,EAFE,CAGPC,IAAI,CAAE,CAHC,CAIPC,MAAM,CAAE,EAJD,CAKPjB,KAAK,CAAE,EALA,CAMPkB,YAAY,CAAE,CANP,CAOPC,MAAM,CAAE,iBAPD,CAQPlB,OAAO,CAAE,MARF,CASPmB,UAAU,CAAE,QATL,CAUPjB,cAAc,CAAE,QAVT,CAWPS,MAAM,CAAE,SAXD,CAYPF,YAAY,CAAE,EAZP,CANgC,CAoBzCC,GAAG,CAAE,CACHD,YAAY,CAAE,EADX,CApBoC,CAAD,CAA1C,CAwBA,GAAMW,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,KAAD,CAAW,CAC5B,GAAMC,CAAAA,OAAO,CAAGV,kBAAkB,EAAlC,CACA,GAAMW,CAAAA,IAAI,CAAGF,KAAK,CAACG,IAAnB,CAF4B,cAGJpC,QAAQ,CAAC,EAAD,CAHJ,wCAGrBqC,IAHqB,eAGfC,OAHe,eAI5B,GAAMC,CAAAA,OAAO,CAAG,CACd,CACEC,MAAM,CAAE,WADV,CAEEC,QAAQ,CAAE,WAFZ,CADc,CAKd,CACED,MAAM,CAAE,SADV,CAEEC,QAAQ,CAAE,SAFZ,CALc,CASd,CACED,MAAM,CAAE,kBADV,CAEEC,QAAQ,CAAE,eAFZ,CATc,CAad,CACED,MAAM,CAAE,SADV,CAEEC,QAAQ,CAAE,SAFZ,CAbc,CAiBd,CACED,MAAM,CAAE,aADV,CAEEC,QAAQ,CAAE,QAFZ,CAjBc,CAqBd,CACED,MAAM,CAAE,aADV,CAEEC,QAAQ,CAAE,QAFZ,CArBc,CAAhB,CA2BA,GAAMC,CAAAA,OAAO,CAAGzC,OAAO,CAAC,iBAAMsC,CAAAA,OAAN,EAAD,CAAgB,EAAhB,CAAvB,CAEAxC,SAAS,CAAC,UAAM,CACd,IAAK,GAAI4C,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGR,IAAI,CAACS,SAAL,CAAeC,MAAnC,CAA2CF,CAAC,EAA5C,CAAgD,CAC9C,GAAMG,CAAAA,KAAK,gCAAOX,IAAI,CAACS,SAAL,CAAeD,CAAf,CAAP,EAA6BR,IAAI,CAACY,OAAL,CAAaJ,CAAb,CAA7B,CAAX,CACAL,OAAO,CAACD,IAAI,CAACW,IAAL,CAAUF,KAAV,CAAD,CAAP,CACD,CACF,CALQ,CAKP,EALO,CAAT,CAMAG,OAAO,CAACC,GAAR,CAAYb,IAAZ,EACA,GAAMc,CAAAA,aAAa,CAAG5C,QAAQ,CAAC,CAC7BmC,OAAO,CAAPA,OAD6B,CAE7BL,IAAI,CAAJA,IAF6B,CAAD,CAA9B,CAxC4B,GA6C1Be,CAAAA,aA7C0B,CAkDxBD,aAlDwB,CA6C1BC,aA7C0B,CA8C1BC,iBA9C0B,CAkDxBF,aAlDwB,CA8C1BE,iBA9C0B,CA+C1BC,YA/C0B,CAkDxBH,aAlDwB,CA+C1BG,YA/C0B,CAgD1BC,IAhD0B,CAkDxBJ,aAlDwB,CAgD1BI,IAhD0B,CAiD1BC,UAjD0B,CAkDxBL,aAlDwB,CAiD1BK,UAjD0B,CAmD5B,mBACE,aAAK,SAAS,CAAEtB,OAAO,CAACxB,IAAxB,wBACE,YAAK,SAAS,CAAEwB,OAAO,CAACT,OAAxB,CAAiC,OAAO,CAAEQ,KAAK,CAACwB,MAAhD,kBADF,cAIE,aAAK,SAAS,CAAEvB,OAAO,CAACZ,GAAxB,uBAAuCa,IAAI,CAACC,IAAL,CAAUsB,OAAjD,GAJF,cAKE,aAAK,SAAS,CAAExB,OAAO,CAACZ,GAAxB,4BACiBa,IAAI,CAACwB,OAAL,CAAaC,YAD9B,GALF,cAQE,aAAK,SAAS,CAAE1B,OAAO,CAACZ,GAAxB,8BACmBa,IAAI,CAACC,IAAL,CAAUyB,cAD7B,GARF,cAWE,aAAK,SAAS,CAAE3B,OAAO,CAACZ,GAAxB,yBAAyCa,IAAI,CAACwB,OAAL,CAAaG,IAAtD,GAXF,cAYE,aAAK,SAAS,CAAE5B,OAAO,CAACZ,GAAxB,8BACmBa,IAAI,CAACC,IAAL,CAAU2B,iBAD7B,GAZF,cAeE,aAAK,SAAS,CAAE7B,OAAO,CAACZ,GAAxB,0BAA0Ca,IAAI,CAAC6B,KAAL,CAAWC,WAArD,GAfF,cAgBE,YAAK,SAAS,CAAE/B,OAAO,CAACZ,GAAxB,+BAhBF,CAmBIa,IAAI,CAACS,SAAL,CAAeC,MAAf,CAAwB,CAAxB,eACA,sCACE,uBACGS,YAAY,CAACY,GAAb,CAAiB,SAACC,WAAD,qBAChB,yCAAQA,WAAW,CAACC,mBAAZ,EAAR,eACGD,WAAW,CAACE,OAAZ,CAAoBH,GAApB,CAAwB,SAACI,MAAD,qBACvB,yCAAQA,MAAM,CAACC,cAAP,EAAR,eACGD,MAAM,CAACE,MAAP,CAAc,QAAd,CADH,GADuB,EAAxB,CADH,GADgB,EAAjB,CADH,EADF,cAYE,4CAAWnB,iBAAiB,EAA5B,eACGE,IAAI,CAACW,GAAL,CAAS,SAAC5C,GAAD,CAAS,CACjBkC,UAAU,CAAClC,GAAD,CAAV,CACA,mBACE,yCACMA,GAAG,CAACmD,WAAJ,EADN,eAGGnD,GAAG,CAACoD,KAAJ,CAAUR,GAAV,CAAc,SAACS,IAAD,CAAU,CACvB,mBACE,yCAAQA,IAAI,CAACC,YAAL,EAAR,eAA8BD,IAAI,CAACH,MAAL,CAAY,MAAZ,CAA9B,GADF,CAGD,CAJA,CAHH,GADF,CAWD,CAbA,CADH,GAZF,GApBJ,GADF,CAqDD,CAxGD,CAyGA,GAAMK,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAAC5C,KAAD,CAAW,gBACJjC,QAAQ,CAAC,EAAD,CADJ,yCACrBqC,IADqB,eACfC,OADe,8BAEUtC,QAAQ,CAAC,IAAD,CAFlB,yCAErB8E,UAFqB,eAETC,eAFS,eAI5B,GAAM7C,CAAAA,OAAO,CAAGzB,UAAU,EAA1B,CACA,GAAM8B,CAAAA,OAAO,CAAG,CACd,CACEC,MAAM,CAAE,QADV,CAEEC,QAAQ,CAAE,SAFZ,CADc,CAKd;AACA;AACA;AACA;AACA,CACED,MAAM,CAAE,YADV,CAEEC,QAAQ,CAAE,SAFZ,CATc,CAad;AACA;AACA;AACA;AACA,CACED,MAAM,CAAE,UADV,CAEEC,QAAQ,CAAE,OAFZ,CAjBc,CAqBd,CACED,MAAM,CAAE,gBADV,CAEEC,QAAQ,CAAE,gBAFZ,CArBc,CAAhB,CA0BA,GAAMC,CAAAA,OAAO,CAAGzC,OAAO,CAAC,iBAAMsC,CAAAA,OAAN,EAAD,CAAgB,EAAhB,CAAvB,CAEA;AACAxC,SAAS,CAAC,UAAM,CACd,CAAC,wDAAC,oKACqBM,CAAAA,OAAO,CAAC,YAAD,CAAe,EAAf,CAD5B,QACM2E,MADN,eAEA1C,OAAO,CAAC0C,MAAD,CAAP,CAFA,sDAAD,KAIF,CALQ,CAKN,EALM,CAAT,CAMA;AACA,GAAM7B,CAAAA,aAAa,CAAG5C,QAAQ,CAAC,CAC7BmC,OAAO,CAAPA,OAD6B,CAE7BL,IAAI,CAAJA,IAF6B,CAAD,CAA9B,CAzC4B,GA8C1Be,CAAAA,aA9C0B,CAmDxBD,aAnDwB,CA8C1BC,aA9C0B,CA+C1BC,iBA/C0B,CAmDxBF,aAnDwB,CA+C1BE,iBA/C0B,CAgD1BC,YAhD0B,CAmDxBH,aAnDwB,CAgD1BG,YAhD0B,CAiD1BC,IAjD0B,CAmDxBJ,aAnDwB,CAiD1BI,IAjD0B,CAkD1BC,UAlD0B,CAmDxBL,aAnDwB,CAkD1BK,UAlD0B,CAoD5BP,OAAO,CAACC,GAAR,CAAYK,IAAZ,EAEA,GAAM0B,CAAAA,WAAW,2FAAG,kBAAO3D,GAAP,wJACGjB,CAAAA,OAAO,CAAC,aAAD,CAAgB,CAAE6E,EAAE,CAAE5D,GAAG,CAAC6D,MAAJ,CAAWzB,OAAjB,CAAhB,CADV,QACZsB,MADY,gBAElBD,eAAe,CAACC,MAAD,CAAf,CAFkB,wDAAH,kBAAXC,CAAAA,WAAW,6CAAjB,CAIA,mBACE,aAAK,SAAS,CAAE/C,OAAO,CAACxB,IAAxB,wBACE,kCACE,YAAK,SAAS,CAAEwB,OAAO,CAACjB,QAAxB,yBADF,EADF,CAIGoB,IAAI,CAACQ,MAAL,CAAc,CAAd,EAAmB,CAACiC,UAApB,eACC,sCACE,uBAQGxB,YAAY,CAACY,GAAb,CAAiB,SAACC,WAAD,qBAChB,yCAAQA,WAAW,CAACC,mBAAZ,EAAR,eACGD,WAAW,CAACE,OAAZ,CAAoBH,GAApB,CAAwB,SAACI,MAAD,qBACvB,yCAAQA,MAAM,CAACC,cAAP,EAAR,eACGD,MAAM,CAACE,MAAP,CAAc,QAAd,CADH,GADuB,EAAxB,CADH,GADgB,EAAjB,CARH,EADF,cAmBE,4CAAWnB,iBAAiB,EAA5B,eAQGE,IAAI,CAACW,GAAL,CAAS,SAAC5C,GAAD,CAAS,CACjBkC,UAAU,CAAClC,GAAD,CAAV,CACA,mBACE,yCACMA,GAAG,CAACmD,WAAJ,EADN,MAEE,OAAO,CAAE,kBAAM,CACbQ,WAAW,CAAC3D,GAAD,CAAX,CACD,CAJH,CAKE,SAAS,CAAEY,OAAO,CAACZ,GALrB,UAOGA,GAAG,CAACoD,KAAJ,CAAUR,GAAV,CAAc,SAACS,IAAD,CAAU,CACvB,mBACE,yCAAQA,IAAI,CAACC,YAAL,EAAR,eAA8BD,IAAI,CAACH,MAAL,CAAY,MAAZ,CAA9B,GADF,CAGD,CAJA,CAPH,GADF,CAeD,CAjBA,CARH,GAnBF,GALJ,CAqDGM,UAAU,eACT,KAAC,UAAD,EAAY,IAAI,CAAEA,UAAlB,CAA8B,MAAM,CAAE,wBAAMC,CAAAA,eAAe,CAAC,IAAD,CAArB,EAAtC,EAtDJ,GADF,CA2DD,CArHD,CAuHA,cAAeF,CAAAA,UAAf","sourcesContent":["import React, { useEffect, useState, useMemo } from \"react\"\nimport { createUseStyles } from \"react-jss\"\nimport cn from \"classnames\"\nimport { useRootState } from \"@/App.js\"\nimport { request } from \"@/request.js\"\nimport ClickAway from \"@/components/Utils/ClickAway\"\n\nimport { useTable } from \"react-table\"\nimport \"../../table.css\"\nimport MOCK_DATA from \"../../MOCK_DATA.json\"\n\nconst tableStyle = createUseStyles({\n  root: {\n    width: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"flex-start\",\n    paddingLeft: 30,\n    position: \"relative\",\n  },\n  bigTitle: {\n    width: \"100%\",\n    fontSize: 40,\n    borderBottom: \"1px solid black\",\n    fontWeight: 500,\n    marginBottom: 10,\n  },\n  // selectionField: {\n  //   display: \"flex\",\n  // },\n  // selectionLabel: {\n  //   fontSize: 20,\n  // },\n  // nextPage: {\n  //   cursor: \"pointer\",\n  //   textDecoration: \" underline\",\n  //   position: \"absolute\",\n  //   bottom: 0,\n  //   right: 20,\n  // },\n  row: {\n    cursor: \"pointer\",\n  },\n})\n\nconst useCaseDetailStyle = createUseStyles({\n  root: {\n    position: \"relative\",\n    display: \"flex\",\n    flexDirection: \"column\",\n  },\n  backBtn: {\n    position: \"absoulte\",\n    top: 10,\n    left: 0,\n    height: 30,\n    width: 60,\n    borderRadius: 6,\n    border: \"1px solid black\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    cursor: \"pointer\",\n    marginBottom: 20,\n  },\n  row: {\n    marginBottom: 20,\n  },\n})\nconst CaseDetail = (props) => {\n  const classes = useCaseDetailStyle()\n  const info = props.case\n  const [data, setData] = useState([])\n  const COLUMNS = [\n    {\n      Header: \"Date From\",\n      accessor: \"date_from\",\n    },\n    {\n      Header: \"Date To\",\n      accessor: \"date_to\",\n    },\n    {\n      Header: \"Name of Location\",\n      accessor: \"location_name\",\n    },\n    {\n      Header: \"Address\",\n      accessor: \"address\",\n    },\n    {\n      Header: \"X-coordiate\",\n      accessor: \"XCoord\",\n    },\n    {\n      Header: \"Y-coordiate\",\n      accessor: \"YCoord\",\n    },\n  ]\n\n  const columns = useMemo(() => COLUMNS, [])\n  \n  useEffect(() => {\n    for (let i = 0; i < info.locations.length; i++) {\n      const entry = {...info.locations[i], ...info.visited[i]}\n      setData(data.push(entry))\n    }\n  },[])\n  console.log(data)\n  const tableInstance = useTable({\n    columns,\n    data,\n  })\n  const {\n    getTableProps,\n    getTableBodyProps,\n    headerGroups,\n    rows,\n    prepareRow,\n  } = tableInstance\n  return (\n    <div className={classes.root}>\n      <div className={classes.backBtn} onClick={props.onBack}>\n        Back\n      </div>\n      <div className={classes.row}>Case ID: {info.case.case_no}</div>\n      <div className={classes.row}>\n        Patient Name: {info.patient.patient_name}\n      </div>\n      <div className={classes.row}>\n        Confirmed Date: {info.case.date_confirmed}\n      </div>\n      <div className={classes.row}>ID number: {info.patient.hkid}</div>\n      <div className={classes.row}>\n        Local/Imported: {info.case.local_or_imported}\n      </div>\n      <div className={classes.row}>Virus Name: {info.virus.common_name}</div>\n      <div className={classes.row}>Location visited:</div>\n\n      {\n        info.locations.length > 0 &&\n        <table>\n          <thead>\n            {headerGroups.map((headerGroup) => (\n              <tr {...headerGroup.getHeaderGroupProps()}>\n                {headerGroup.headers.map((column) => (\n                  <th {...column.getHeaderProps()}>\n                    {column.render(\"Header\")}\n                  </th>\n                ))}\n              </tr>\n            ))}\n          </thead>\n          <tbody {...getTableBodyProps()}>\n            {rows.map((row) => {\n              prepareRow(row)\n              return (\n                <tr\n                  {...row.getRowProps()}\n                >\n                  {row.cells.map((cell) => {\n                    return (\n                      <td {...cell.getCellProps()}>{cell.render(\"Cell\")}</td>\n                    )\n                  })}\n                </tr>\n              )\n            })}\n          </tbody>\n        </table>\n      }\n    </div>\n  )\n}\nconst ViewRecord = (props) => {\n  const [data, setData] = useState([])\n  const [selectCase, setSelectedCase] = useState(null)\n\n  const classes = tableStyle()\n  const COLUMNS = [\n    {\n      Header: \"CaseId\",\n      accessor: \"case_no\",\n    },\n    // {\n    //   Header:'Patient Name',\n    //   accessor:'patient_name'\n    // },\n    {\n      Header: \"Patient ID\",\n      accessor: \"patient\",\n    },\n    // {\n    //   Header:'Virus Name',\n    //   accessor:'virus_name'\n    // },\n    {\n      Header: \"virus ID\",\n      accessor: \"virus\",\n    },\n    {\n      Header: \"Date Confirmed\",\n      accessor: \"date_confirmed\",\n    },\n  ]\n  const columns = useMemo(() => COLUMNS, [])\n\n  //const data = useMemo(() => MOCK_DATA,[])//not done\n  useEffect(() => {\n    ;(async () => {\n      const result = await request(\"getAllCase\", [])\n      setData(result)\n    })()\n  }, [])\n  // console.log(JSON.stringify(request('viewDetail')))\n  const tableInstance = useTable({\n    columns,\n    data,\n  })\n  const {\n    getTableProps,\n    getTableBodyProps,\n    headerGroups,\n    rows,\n    prepareRow,\n  } = tableInstance\n  console.log(rows)\n\n  const showDetails = async (row) => {\n    const result = await request(\"getCaseById\", { id: row.values.case_no })\n    setSelectedCase(result)\n  }\n  return (\n    <div className={classes.root}>\n      <div>\n        <div className={classes.bigTitle}>View Record</div>\n      </div>\n      {data.length > 0 && !selectCase && (\n        <table>\n          <thead>\n            {/* <tr>\n            <th>CaseID</th>\n            <th>PatientName</th>\n            <th>Virus</th>\n            <th>Date Confirmed</th>\n            <th>URL for more details</th>\n          </tr> */}\n            {headerGroups.map((headerGroup) => (\n              <tr {...headerGroup.getHeaderGroupProps()}>\n                {headerGroup.headers.map((column) => (\n                  <th {...column.getHeaderProps()}>\n                    {column.render(\"Header\")}\n                  </th>\n                ))}\n              </tr>\n            ))}\n          </thead>\n          <tbody {...getTableBodyProps()}>\n            {/* <tr>\n            <td>dummy_ID</td>\n            <td>Dummy Chan</td>\n            <td>CoVID-19</td>\n            <td>dd-mm-yyyy</td>\n            <td><a href=\"https://www.gooogle.com\">URL</a></td>\n          </tr> */}\n            {rows.map((row) => {\n              prepareRow(row)\n              return (\n                <tr\n                  {...row.getRowProps()}\n                  onClick={() => {\n                    showDetails(row)\n                  }}\n                  className={classes.row}\n                >\n                  {row.cells.map((cell) => {\n                    return (\n                      <td {...cell.getCellProps()}>{cell.render(\"Cell\")}</td>\n                    )\n                  })}\n                </tr>\n              )\n            })}\n          </tbody>\n        </table>\n      )}\n      {selectCase && (\n        <CaseDetail case={selectCase} onBack={() => setSelectedCase(null)} />\n      )}\n    </div>\n  )\n}\n\nexport default ViewRecord\n"]},"metadata":{},"sourceType":"module"}